(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7167:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Pn}});var i=n(5893),r=n(7294);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(this,t),this._name=Symbol(),this._type=e,this._singleton=n,this._obj=null,this.depList=[]}var e,n,i;return t.prototype.findDepByName=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name==t)return i}return null},e=t,(n=[{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type}},{key:"singleton",get:function(){return this._singleton}},{key:"obj",get:function(){return this._obj},set:function(t){this._obj=t}},{key:"totalDep",get:function(){return this.depList.length}}])&&a(e.prototype,n),i&&a(e,i),t}(),c=o;function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;h(this,t),this._name=e,this._master=n,this._children=[],this._data=null}var e,n,i,r=t.prototype;return r.addChild=function(t){this._children.push(t)},r.importChildren=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.addChild(n)}},e=t,(n=[{key:"children",get:function(){return this._children}},{key:"master",get:function(){return null==this._master?(console.error("master is still null, it doesn't exist. It is Root!"),new t(Symbol("null"))):this._master},set:function(t){this._master=t}},{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"isAllocated",get:function(){return null!=this._data}},{key:"isNoDep",get:function(){return 0==this._children.length}},{key:"instances",get:function(){for(var t=[],e=0;e<this._children.length;e++){var n=this._children[e];t.push(n.data)}return t}},{key:"depsReady",get:function(){for(var t=!0,e=0;e<this._children.length;e++)null==this._children[e].data&&(t=!1);return t}}])&&u(e.prototype,n),i&&u(e,i),t}(),_=d;var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.allocate=function(t,e){switch(e.length){case 0:default:return new t;case 33:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26],e[27],e[28],e[29],e[30],e[31],e[32]);case 32:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26],e[27],e[28],e[29],e[30],e[31]);case 31:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26],e[27],e[28],e[29],e[30]);case 30:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26],e[27],e[28],e[29]);case 29:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26],e[27],e[28]);case 28:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26],e[27]);case 27:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25],e[26]);case 26:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24],e[25]);case 25:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23],e[24]);case 24:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22],e[23]);case 23:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21],e[22]);case 22:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20],e[21]);case 21:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19],e[20]);case 20:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18],e[19]);case 19:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17],e[18]);case 18:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16],e[17]);case 17:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15],e[16]);case 16:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);case 15:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14]);case 14:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13]);case 13:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12]);case 12:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11]);case 11:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 4:return new t(e[0],e[1],e[2],e[3]);case 3:return new t(e[0],e[1],e[2]);case 2:return new t(e[0],e[1]);case 1:return new t(e[0])}},t}();function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f(this,t),this._modList=e,this._objectMaker=new l,this._globalState=n,this._singletonData={}}var e,n,i,r=t.prototype;return r.resolve=function(t){var e=this._createNode(t);return this._resolveTree(e),e.data},r._resolveTree=function(t){var e=this._getDepTrees(t);if(t.importChildren(e),this._treeNoDep(t)&&!this._treeIsAllocated(t))this._allocateTree(t);else{for(var n=this._getChildList(t),i=0;i<n.length;i++){var r=n[i];this._resolveTree(r),n=this._getChildList(t)}this._allocateTree(t)}},r._getDepTrees=function(t){var e=this._depNodeName(t),n=this._getDep(e),i=[];if(null!=n)for(var r=this._getDepList(n),s=0;s<r.length;s++){var a=r[s],o=this._createNode(this._depName(a));i.push(o)}return i},r._createNode=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._getDep(t),i=this._newNode(t);return null!=n?this._decorateNode(i,n,e):console.error("Can't Find Dependency %s",t),i},r._allocateTree=function(t){if(!this._treeIsAllocated(t)){var e=this._treeGetType(t),n=this._treeGetInstances(t),i=this._getDep(t.name),r=null,s=i.name;i.singleton?null!=this._singletonData[s]?r=this._singletonData[s]:(r=this._createInstance(e,n),this._singletonData[s]=r,null!=this._globalState&&(r.globalState=this._globalState)):(r=this._createInstance(e,n),null!=this._globalState&&(r.globalState=this._globalState)),this._treeSetData(t,r)}},r._getDep=function(t){return new c(null,!1).findDepByName(t,this._modList)},r._getDepList=function(t){return t.depList},r._newNode=function(t){return new _(t)},r._treeSetData=function(t,e){t.data=e},r._treeGetType=function(t){return t.type},r._treeGetInstances=function(t){return t.instances},r._treeNoDep=function(t){return t.isNoDep},r._treeIsAllocated=function(t){return t.isAllocated},r._getChildList=function(t){return t.children},r._decorateNode=function(t,e,n){t.type=e.type,null!=n&&(t.master=n)},r._depNodeName=function(t){return t.name},r._depName=function(t){return t.name},r._createInstance=function(t,e){return this._objectMaker.allocate(t,e)},e=t,(n=[{key:"modList",set:function(t){this._modList=t}}])&&p(e.prototype,n),i&&p(e,i),t}(),m=y;function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;g(this,t),this._globalState=e,console.log("SmartDepend globalState: ",e),this._modList=[]}var e=t.prototype;return e.addModule=function(t,e){var n=this._createDep(t,e);return this._modList.push(n),n.name},e.addDependency=function(t,e){var n=this._getDep(t),i=this._getDep(e);null!=n&&null!=i?n.depList.push(i):console.warn("Either %s or %s modules not found!",t,e)},e.resolve=function(t){return this._resolveDepends(t)},e._createDep=function(t,e){return new c(t,e)},e._resolveDepends=function(t){return new m(this._modList,this._globalState).resolve(t)},e._getDep=function(t){return new c(null,!1).findDepByName(t,this._modList)},t}(),b=v;function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._onUpdate=function(){},this._x=0,this._y=0,this._maxX=2e3,this._minX=-2e3,this._maxY=3e3,this._minY=-3e3,this._minDiffX=.5,this._minDiffY=.5}var e,n,i,r=t.prototype;return r.int=function(t,e,n){this._x=t,this._y=e,this._onUpdate=n},r._updateXY=function(t,e){t!=this._x&&(this._x=t),e!=this._y&&(this._y=e),this._onUpdate()},r._getPositive=function(t){return t<0?-1*t:t},e=t,(n=[{key:"x",get:function(){return this._x},set:function(t){this._getPositive(t-this._x)>this._minDiffX&&t<this._maxX&&t>this._minX&&this._updateXY(t,this._y)}},{key:"y",get:function(){return this._y},set:function(t){this._getPositive(t-this._y)>this._minDiffY&&t<this._maxY&&t>this._minY&&this._updateXY(this._x,t)}},{key:"onUpdate",get:function(){return this._onUpdate},set:function(t){this._onUpdate=t}}])&&w(e.prototype,n),i&&w(e,i),t}();var x,S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e=t.prototype;return e.sendMessage=function(t,e,n){var i={id:t,message:e};n.send({type:"chat_message",data:i})},e.printMessage=function(t,e,n){n?console.log("%cYou: %c"+e,"color: #0096FF","color: #3F00FF"):console.log("%cPlayer"+t+": %c"+e,"color: #EE4B2B","color: #EC5800")},t}(),k=n(4051),O=n.n(k);function P(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){P(s,i,r,a,o,"next",t)}function o(t){P(s,i,r,a,o,"throw",t)}a(void 0)}))}}!function(t){t[t.Success=0]="Success",t[t.Failure=1]="Failure"}(x||(x={}));var C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e=t.prototype;return e.getCharacter=function(){var t=this;return T(O().mark((function e(){var n,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{name:"Sun",species:"Filari",subspecies:"Learned",face:"Sunglass",top:"Cheeky Unt Koala Top",bottom:"Cheeky Unt Koala Bottom",back:"Cheeky Unt Rainbow Fart",righthand:"Fishing Rod"},{name:"Moon",species:"Filari",subspecies:"Learned",face:"Sunglass",top:"Cheeky Unt Koala Top",bottom:"Cheeky Unt Koala Bottom",back:"Cheeky Unt Rainbow Fart",righthand:"Fishing Rod"},{name:"Earth",species:"Filari",subspecies:"Learned",face:"Sunglass",top:"Cheeky Unt Koala Top",bottom:"Cheeky Unt Koala Bottom",back:"Cheeky Unt Rainbow Fart",righthand:"Fishing Rod"}],i=t._randomIntFromInterval(1,n.length),e.abrupt("return",new Promise((function(t,e){t(n[i])})));case 3:case"end":return e.stop()}}),e)})))()},e.isLogged=function(){return T(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=T(O().mark((function t(e,n){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(!0);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},e.login=function(){},e.connectWallet=function(){return T(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){t(!0)})));case 1:case"end":return t.stop()}}),t)})))()},e._randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t}(),E=C;var j=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._wsServer=e,this._socketTypes=n,this._count=0,this._onceEvery=600,this._initDone=!1}var e=t.prototype;return e.init=function(){console.log("ping test init!"),this._initDone=!0},e.test=function(){this._initDone&&(this._count>=this._onceEvery?(this._count=0,this._testPing()):this._count++)},e._testPing=function(){console.log("ping test being sent!"),this._wsServer.send({type:this._socketTypes.TEST_PING,data:{time:Date.now()}})},t}();var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._skipUpdates=0,this._updates=0}var e=t.prototype;return e.init=function(t){this._skipUpdates=t},e.canExecute=function(){return this._updates++,this._updates>=this._skipUpdates&&(this._updates=0,!0)},t}();function A(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var L,N,R,F=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._positionMode={x:L.left,y:L.left,modifier:1},this._sizeMode={x:R.normal,y:R.normal,modifier:1},this._containerMode=N.gameplay}var e,n,i;return t.prototype.createNew=function(){return new t},e=t,(n=[{key:"positionMode",get:function(){return this._positionMode},set:function(t){this._positionMode=t}},{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode=t}},{key:"containerMode",get:function(){return this._containerMode},set:function(t){this._containerMode=t}}])&&A(e.prototype,n),i&&A(e,i),t}();function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}!function(t){t[t.left=0]="left",t[t.center=1]="center",t[t.right=2]="right"}(L||(L={})),function(t){t[t.gameplay=0]="gameplay",t[t.global=1]="global"}(N||(N={})),function(t){t[t.normal=0]="normal",t[t.fill=1]="fill",t[t.maintain_ratio=2]="maintain_ratio"}(R||(R={}));var X=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._entityFactory=e,this._sprite=n}var e,n,i,r=t.prototype;return r.init=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this._sprite=this._entityFactory.sprite(t,e,n,i),this._sprite.position.anchorX=0,this._sprite.position.anchorY=0,this._sprite.position.disableCamera=!0,this._sprite.position.fitInsideContainer(!1),this._sprite.display.setScaleMode(R.fill,R.fill,1)},r.createNew=function(){return new t(this._entityFactory,this._sprite.createNew())},e=t,(n=[{key:"sprite",get:function(){return this._sprite}}])&&W(e.prototype,n),i&&W(e,i),t}(),U=X;function Y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var I=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._entityFactory=e,this._sprite=n}var e,n,i,r=t.prototype;return r.init=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this._sprite=this._entityFactory.sprite(t,e,i,r),this._sprite.enableInput(),this._sprite.input.addMouseUp((function(){n()}))},r.initStatic=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this._sprite=this._entityFactory.sprite(t,e,i,r),this._sprite.position.anchorX=.5,this._sprite.position.anchorY=.5,this._sprite.enableInput(),this._sprite.input.addMouseUp((function(){n()}))},r.createNew=function(){return new t(this._entityFactory,this._sprite.createNew())},e=t,(n=[{key:"sprite",get:function(){return this._sprite}}])&&Y(e.prototype,n),i&&Y(e,i),t}(),B=I;function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return!e||"object"!==z(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function V(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=H(t);if(e){var r=H(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return G(this,n)}}var q=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(n,t);var e=V(n);function n(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,i)}return n.prototype.set=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){console.log("Discord <login request>")},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"login",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.initStatic(t,e,(function(){n()}),i,r),this.sprite.position.disableCamera=!0},n}(B),J=q;function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Z,$=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._entityFactory=e,this._spriteList=[],window.spriteList=this._spriteList,this._newPhysics=null,this._newPhysicsStarted=!1}var e,n,i,r=t.prototype;return r.init=function(t){this._newPhysics=t},r.addObjects=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=this._entityFactory.sprite(i.x,4e3-i.y,e,i.imageName);r.position.anchorX=.5,r.position.anchorY=.5,r.position.y=r.position.y-r.display.height/2,r.position.x=r.position.x+r.display.width/2,this._spriteList.push(r)}},r.showDebug=function(){this._spriteList.forEach((function(t){t.drawDebug()}))},r.updatePositions=function(){for(var t=0;t<this._spriteList.length;t++){var e=this._spriteList[t];e.position.updatePosition(),this._newPhysicsStarted||this._newPhysics&&(this._newPhysics.addObject(e),this._newPhysics.setStatic(e,!0),this._newPhysics.setCategory(e,1),console.log(e.display.height))}this._newPhysicsStarted||this._newPhysics&&(this._newPhysicsStarted=!0)},e=t,(n=[{key:"spriteList",get:function(){return this._spriteList}}])&&Q(e.prototype,n),i&&Q(e,i),t}();function tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}!function(t){t[t.Negative=0]="Negative",t[t.Positive=1]="Positive",t[t.Same=2]="Same"}(Z||(Z={}));var et=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dir=[{max:145,min:211,label:"LEFT",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:344,min:360,label:"RIGHT",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:250,min:285,label:"UP",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:64,min:109,label:"DOWN",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:211,min:250,label:"LEFTUP",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:109,min:145,label:"LEFTDOWN",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:285,min:344,label:"RIGHTUP",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:16,min:64,label:"RIGHTDOWN",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:0,min:16,label:"RIGHT",animation:"",sideX:Z.Positive,sideY:Z.Positive},{max:-1,min:-1,label:"IDLE",animation:"",sideX:Z.Positive,sideY:Z.Positive}],this._labels=["LEFT","RIGHT","UP","DOWN","LEFTUP","LEFTDOWN","RIGHTUP","RIGHTDOWN","IDLE"]}var e,n,i,r=t.prototype;return r.setAnimations=function(t){var e=this;t.forEach((function(t){var n=t.label;e._labels.includes(n)&&e._setAnimation(t.label,t.key,t.sideX,t.sideY)}))},r.animForAngle=function(t){var e=this._dir.filter((function(e){return t>e.max&&t<=e.min&&e.max>=0}));return e.length<1&&console.error("Can't calculate anim for angle!"),e[0]},r.animForLabel=function(t){var e=this._dir.filter((function(e){return e.label==t}));return e.length<1&&console.error("Can't calculate anim for label!"),e[0]},r.animForKey=function(t){var e=this._dir.filter((function(e){return e.animation==t}));return console.log("Key: ".concat(t)),e.length<1&&console.error("Can't calculate anim for animation key!"),e[0]},r.createNew=function(){return new t},r._setAnimation=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.Positive,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Z.Positive;this._dir.forEach((function(r){r.label==t&&(r.animation=e,r.sideX=n,r.sideY=i)}))},e=t,(n=[{key:"dir",get:function(){return this._dir}}])&&tt(e.prototype,n),i&&tt(e,i),t}(),nt=et;function it(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var rt=function(){function t(e,n,i,r,s,a,o,c,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("ver: 0.6.0"),this._entityFactory=e,this._spine=n,this._newPhysics=null,this._screen=i,this._animationDir=s,this._lerpLock=!1,this._idleLock=!0,this._moveTime=-1,this._onUpdateMotion=function(){},this._speedX=5,this._speedY=9,this._opponent=!1,this._mouseDown=!1,this._config=r,this._emptyNumber=0,this._animationName="",this._animationMove={},this._lerpData={startX:0,startY:0,endX:0,endY:0,totalTime:0,issueTime:0,canLerp:!1},this._xCache=a,this._yCache=o,this._bridgeConfig=c,this._reactBridge=h,this._reactBridge.forceAvailableGlobal(),this._mapObjects=[]}var e,n,i,r=t.prototype;return r.createNew=function(){return new t(this._entityFactory,this._spine.createNew(),this._screen,this._config,this._animationDir.createNew(),this._xCache.createNew(),this._yCache.createNew(),this._bridgeConfig,this._reactBridge)},r.init=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._newPhysics=i,this._opponent=r,this._onUpdateMotion=n,this._setAnimationKeys();var s="pirate";console.log("using sprite: ",s),this._spine=this._entityFactory.character(t,e,["body","fhand","top","gloveb","glovef","bottom","head","face","hair"]),this._spine.position.anchorX=.5,this._spine.position.anchorY=.8,this._spine.display.scaleX=1.4,this._spine.display.scaleY=1.4,this._spine.setAnimation("idle",1,{body:5,hair:4}),this._spine.enableInput();var a=this;this._spine.position.trackX=function(t){a._xCache.addData(t)},this._spine.position.trackY=function(t){a._yCache.addData(t)},this._opponent||this._addListeners(),r||(this._newPhysics.addObject(this._spine,{isStatic:!1}),this._newPhysics.setCategory(this._spine,2),this._newPhysics.setMask(this._spine,1),console.log("spine id: ",this._spine.id)),r||(window.Player=this._spine)},r._yDiffBetween=function(t,e,n,i){var r=!1;return e.forEach((function(e){e.position.y-t.position.y>n&&e.position.y-t.position.y<i&&(console.log("jump diff: ",e.position.y-t.position.y),r=!0)})),r},r.enableLerp=function(t){this._lerpData={startX:t.start.x,startY:t.start.y,endX:t.end.x,endY:t.end.y,totalTime:t.time,issueTime:Date.now(),canLerp:!0}},r.disableLerp=function(){this._lerpData.canLerp=!1},r.update=function(){var t=this._reactBridge.getValue(this._bridgeConfig.CHAT_SHOWWINDOWSTATUSPROP,null);this._lerpData.canLerp&&this._doLerp(),this._spine.input.isDown("Enter")&&(this._reactBridge.execute(this._bridgeConfig.CHAT_SHOWWINDOW,!0),this._stopMoving()),t||this._handleKeyboardMove()},r._handleKeyboardMove=function(){if(!this._opponent){var t=this._spine.input.isDown("ArrowUp")||this._spine.input.isDown("KeyW"),e=this._spine.input.isDown("ArrowDown")||this._spine.input.isDown("KeyS"),n=this._spine.input.isDown("ArrowLeft")||this._spine.input.isDown("KeyA"),i=this._spine.input.isDown("ArrowRight")||this._spine.input.isDown("KeyD");t&&this._yDiffBetween(this._spine,this._mapObjects,83,85)&&this._moveUp(),n&&!i&&this._moveLeft(),i&&!n&&this._moveRight(),t||e||n||i||this._stopMoving()}},r._doLerp=function(){var t=(Date.now()-this._lerpData.issueTime)/this._lerpData.totalTime;t>1&&(t=1);var e,n=this._lerp(this._lerpData.startX,this._lerpData.endX,t),i=this._lerp(this._lerpData.startY,this._lerpData.endY,t);this._opponent||(null===(e=this._newPhysics)||void 0===e||e.setPosition(this.sprite,{x:n,y:i}));this.sprite.position.x=n,this.sprite.position.y=i,this.sprite.position.x==this._lerpData.endX&&this.sprite.position.y==this._lerpData.endY&&this.disableLerp()},r._setAnimationKeys=function(){var t=[{label:"LEFT",key:"walk",sideX:Z.Negative,sideY:Z.Positive},{label:"RIGHT",key:"walk",sideX:Z.Positive,sideY:Z.Positive},{label:"UP",key:"walk",sideX:Z.Same,sideY:Z.Positive},{label:"DOWN",key:"walk",sideX:Z.Same,sideY:Z.Positive},{label:"LEFTUP",key:"walk",sideX:Z.Negative,sideY:Z.Positive},{label:"LEFTDOWN",key:"walk",sideX:Z.Negative,sideY:Z.Positive},{label:"RIGHTUP",key:"walk",sideX:Z.Positive,sideY:Z.Positive},{label:"RIGHTDOWN",key:"walk",sideX:Z.Positive,sideY:Z.Positive},{label:"IDLE",key:"idle",sideX:Z.Same,sideY:Z.Positive}];this._animationDir.setAnimations(t)},r._moveRequirements=function(){var t=this;this._lerpLock=!0,this._idleLock=!1,setTimeout((function(){t._lerpLock=!1}),400)},r._moveUp=function(){if(this._speedY>0){var t;this._moveRequirements();var e=-1*this._speedY;this.showAnimation("UP"),null===(t=this._newPhysics)||void 0===t||t.setVelocity(this._spine,{x:0,y:e}),this._sendVector(0,e)}},r._moveTopRight=function(){this._moveRequirements(),this.showAnimation("RIGHTUP")},r._moveBottomRight=function(){this._moveRequirements(),this.showAnimation("RIGHTDOWN")},r._moveBottomLeft=function(){this._moveRequirements(),this.showAnimation("LEFTDOWN")},r._moveTopLeft=function(){this._moveRequirements(),this.showAnimation("LEFTUP")},r._moveDown=function(){this._moveRequirements(),this.showAnimation("DOWN")},r._moveLeft=function(){var t;this._moveRequirements(),this.showAnimation("LEFT");var e=-1*this._speedX;null===(t=this._newPhysics)||void 0===t||t.setContVector(this._spine,{x:e,y:0}),this._sendVector(e,0)},r._moveRight=function(){var t;this._moveRequirements(),this.showAnimation("RIGHT");var e=1*this._speedX;null===(t=this._newPhysics)||void 0===t||t.setContVector(this._spine,{x:e,y:0}),this._sendVector(e,0)},r._updateKeyboardMotion=function(t,e){var n=t,i=e;n==this._spine.body.vx&&i==this._spine.body.vy||this._sendVector(n,i)},r._moveTowardsMouse=function(){var t=this._getRad(),e=Math.cos(t)*this._speedX,n=Math.sin(t)*this._speedY;e==this._spine.body.vx&&n==this._spine.body.vy||this._sendVector(e,n)},r._sendVector=function(t,e){var n={startTime:Date.now(),vectorX:t,vectorY:e,animation:this._animationMove,scaleX:this._spine.display.scaleX,scaleY:this._spine.display.scaleY};this._onUpdateMotion(n)},r._addListeners=function(){var t=this;document.getElementsByTagName("canvas")[0].addEventListener("mousedown",(function(e){t.printAngle(!0),t._mouseDown=!0})),document.addEventListener("mouseup",(function(e){t._mouseDown=!1,t._stopMoving()}))},r.printAngle=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=window.innerWidth/2,n=window.innerHeight/2,i=this._screen.mouse.mouse.global.x,r=this._screen.mouse.mouse.global.y,s=r-n,a=i-e,o=Math.atan2(s,a);return(o*=180/Math.PI)<0&&(o=360+o),t&&console.log(o),o},r._getRad=function(){var t=window.innerWidth/2,e=window.innerHeight/2,n=this._screen.mouse.mouse.global.x,i=this._screen.mouse.mouse.global.y-e,r=n-t;return Math.atan2(i,r)},r._addMouseMoves=function(){var t=this;document.addEventListener("mousedown touchstart",(function(e){e.preventDefault(),t._screen.mouse.mouse.global.x,t._config.width}))},r._stopMoving=function(){var t;this._idleLock||(this._idleLock=!0,this.showAnimation("IDLE"),null===(t=this._newPhysics)||void 0===t||t.setContVector(this._spine,{x:0,y:0}),this._sendVector(0,0))},r.forceAnimation=function(t){var e=t.animation;if(e!=this._animationName||this._animationMove.sideX!=t.sideX){console.log("Animation Name: ".concat(e));var n=this._spine.display.scaleX,i=this._spine.display.scaleY;t.sideX==Z.Negative?(n=this._makeNegative(n),console.log("Negated scaleX")):t.sideX==Z.Positive&&(n=this._makePositive(n)),t.sideY==Z.Negative?i=this._makeNegative(i):t.sideY==Z.Positive&&(i=this._makePositive(i)),this._spine.setAnimation(e,1,{body:5,fhand:4}),this._animationName=e,this._spine.display.scaleX=n,this._spine.display.scaleY=i,this._animationMove=t}},r.showAnimation=function(t){var e=this._animationDir.animForLabel(t);this.forceAnimation(e)},r._makePositive=function(t){return t<0?-1*t:t},r._makeNegative=function(t){return t>0?-1*t:t},r._lerp=function(t,e,n){return t+(e-t)*n},e=t,(n=[{key:"animationName",get:function(){return this._animationName}},{key:"emptyNumber",get:function(){return this._emptyNumber}},{key:"opponent",get:function(){return this._opponent},set:function(t){this._opponent=t}},{key:"sprite",get:function(){return this._spine}},{key:"moveTime",get:function(){var t=this._moveTime;return this._moveTime=-1,t},set:function(t){this._moveTime=t}},{key:"mapObjects",set:function(t){this._mapObjects=t}}])&&it(e.prototype,n),i&&it(e,i),t}(),st=rt;function at(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}var ot=function(){function t(e,n,i,r,s,a,o,c,h,u,d,_,l,f,p,y,m,g,v,b,w,D){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._gfxLoader=e,this._dataLoader=n,this._resource=i,this._entityFactory=r,this._sceneManager=s,this._map=a,this._hudText=o,this._camera=c,this._player=h,this._config=u,this._slowEvent=d,this._mapBulilder=_,this._wsServer=l,this._chatbot=f,this._background=p,this._newPhysics=y,this._pingTest=m,this._socketTypes=g,this._bridgeConfig=w,this._reactBridge=D,this._reactBridge.forceAvailableGlobal(),this._char=v,this._gameAPI=b,this._canUpdate=!0,this._enemies=[],this._updateTimes=[150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150],this._lastServerUpdate=-1}var e=t.prototype;return e.preload=function(){return(t=O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){at(s,i,r,a,o,"next",t)}function o(t){at(s,i,r,a,o,"throw",t)}a(void 0)}))})();var t},e.create=function(){var t=this;this._background.sprite.enableInput(),this._background.sprite.input.addKeyDown("KeyC",(function(){console.log("KeyC"),t._reactBridge.execute(t._bridgeConfig.INFO_SHOWWINDOW,!0)})),this._background.sprite.input.addKeyDown("KeyP",(function(){t._reactBridge.execute(t._bridgeConfig.FRIEND_SHOWWINDOW,!0)})),this._background.sprite.input.addKeyDown("KeyB",(function(){console.log("KeyB"),t._reactBridge.execute(t._bridgeConfig.EQU_SHOWWINDOW,!0)})),this._background.sprite.input.addKeyDown("Enter",(function(){t._reactBridge.getValue(t._bridgeConfig.CHAT_SHOWWINDOWSTATUSPROP,null)&&t._reactBridge.execute(t._bridgeConfig.CHAT_SENDNOW,null)})),this._background.sprite.input.addKeyDown("Escape",(function(){t._reactBridge.execute(t._bridgeConfig.CHAT_SHOWWINDOW,!1),t._reactBridge.execute(t._bridgeConfig.INFO_SHOWWINDOW,!1),t._reactBridge.execute(t._bridgeConfig.EQU_SHOWWINDOW,!1)})),console.log("On Arena!"),this._slowEvent.init(60),console.log("Fiat2",this._dataLoader.getData("Fiat2").composite.sImages),this._background.init(0,0,"back"),this._addHud(),this._mapBulilder.init(this._newPhysics),this._mapBulilder.addObjects(this._dataLoader.getData("Fiat2").composite.sImages,"new_main"),window.mapBuilder=this._mapBulilder,this._player.init(250,1568,(function(e){t._updateMotion(e)}),this._newPhysics),this._player.mapObjects=this._mapBulilder.spriteList,this._camera.onUpdate=function(){t._updateCamera()},this._camera.x=-1300,this._camera.y=-1800,this._char=this._entityFactory.character(this._player.sprite.position.x,this._player.sprite.position.y,["body","face","gloveb","hair","top","bottom","fhand","glovef","head"]),window.camera=this._camera,window.char=this._char,this._startServer().then((function(){var e=t;console.log("Ws Server init done"),t._canUpdate=!0,t._pingTest.init(),t._reactBridge.addEntry(t._bridgeConfig.CHAT_SENDMESSAGE,(function(t){e._chatbot.sendMessage(e._player.sprite.id,t,e._wsServer)}),null),window.sendChat=function(t){e._chatbot.sendMessage(e._player.sprite.id,t,e._wsServer)}}))},e._addHud=function(){this._hudText=this._entityFactory.text(50,50,"Ping: <Calculating>",{fontSize:60,fill:"white"}),this._hudText.position.anchorX=0,this._hudText.position.anchorY=0,this._hudText.position.disableCamera=!0,this._hudText.position.fitInsideContainer(!1),this._hudText.display.visible=!0},e.update=function(){if(this._canUpdate){this._char.position.x=this._player.sprite.position.x,this._char.position.y=this._player.sprite.position.y,this._pingTest.test(),this._newPhysics.update(0),this._player.update();for(var t=0;t<this._enemies.length;t++){this._enemies[t].update()}var e=-1*(this._player.sprite.position.x-this._config.width/2),n=-1*(this._player.sprite.position.y-this._config.height/2);this._camera.x!=e&&(this._camera.x=e),this._camera.y!=n&&(this._camera.y=n),this._slowEvent.canExecute()&&this._updatePlayerPosition()}},e.shutdown=function(){},e._addListeners=function(){},e._updatePlayerPosition=function(){},e._startServer=function(){return console.log("Starting server..."),this._wsServer.startServer(this._onMessages.bind(this))},e._onMessages=function(t){"world_update"==t.type?this._recievedWorldUpdate(t.data):"remove_player"==t.type?this._deletePlayer(t.data.id):"chat_message"==t.type?this._handleChat(t.data):"chat_update"==t.type?this._handleChatUpdate(t.data):t.type==this._socketTypes.TEST_PING&&this._handlePing(t.data)},e._handlePing=function(t){var e=Date.now()-t.time;this._hudText.label.text="Ping: "+e},e._handleChatUpdate=function(t){var e=this;t.forEach((function(t,n){e._reactBridge.execute(e._bridgeConfig.CHAT_UPDATEDATA,{id:t.id,message:t.message,channels:["General"],isYou:t.id==e._player.sprite.id})}))},e._handleChat=function(t){var e=t.id==this._player.sprite.id;this._reactBridge.execute(this._bridgeConfig.CHAT_UPDATEDATA,{id:t.id,message:t.message,channels:["General"],isYou:e}),this._chatbot.printMessage(t.id,t.message,e)},e._deletePlayer=function(t){for(var e=0;e<this._enemies.length;e++){var n=this._enemies[e];if(n.sprite.id==t)return this._enemies.splice(e,1),void n.sprite.destroy()}},e._recievedPlayerInfo=function(t){this._player.sprite.position.x=t._position.x,this._player.sprite.position.y=t._position.y,this._player.sprite.body.vx=t._body.vx,this._player.sprite.body.vy=t._body.vy},e._recievedWorldUpdate=function(t){this._lastServerUpdate<0&&(this._lastServerUpdate=Date.now());var e=t.id,n=Date.now();this._addTimeDiff(n-this._lastServerUpdate),this._putID(e);for(var i=t.players,r=0;r<i.length;r++){var s=i[r];s.id!==this._player.sprite.id?this._settleEnemy(s):this._lerpPlayer(s)}this._lastServerUpdate=n},e._settleEnemy=function(t){var e=this._getElement(t.id);e>-1?this._setEnemy(e,t):this._createEnemy(t)},e._lerpPlayer=function(t){this._player.enableLerp({start:{x:this._player.sprite.position.x,y:this._player.sprite.position.y},end:{x:t.position.x,y:t.position.y},time:this._getLerpTime()})},e._setEnemy=function(t,e){Date.now();var n=this._enemies[t];n.enableLerp({start:{x:n.sprite.position.x,y:n.sprite.position.y},end:{x:e.position.x,y:e.position.y},time:this._getLerpTime()});var i=e;null!=i.animation&&n.forceAnimation(i.animation)},e._addTimeDiff=function(t){this._updateTimes.splice(0,1),this._updateTimes.push(t)},e._getLerpTime=function(){for(var t=0,e=0;e<this._updateTimes.length;e++)t+=this._updateTimes[e];return t/this._updateTimes.length},e._putID=function(t){this._player.sprite.id=t},e._getEnemy=function(t){for(var e=0;e<this._enemies.length;e++){var n=this._enemies[e];if(n.sprite.id==t)return n}return null},e._startServerOLD=function(){},e._updateMotion=function(t){var e={type:"movePlayer",data:{direction:t}};this._wsServer.send(e)},e._createEnemy=function(t){var e=this._player.createNew();e.init(t.position.x,t.position.y,(function(t,e){}),this._newPhysics,!0),e.sprite.id=t.id,this._enemies.push(e)},e._newPlayer=function(t){this._createEnemy(t)},e._updateCamera=function(){this._player.sprite.position.updatePosition(),this._mapBulilder.updatePositions(),this._background.sprite.position.updatePosition()},e._removeElement=function(t){var e=this._getElement(t);if(t>-1){var n=this._enemies[e];this._enemies.splice(e,1),n.sprite.position.x=-1e4,n.sprite.destroy()}},e._getElement=function(t){for(var e=0;e<this._enemies.length;e++){if(this._enemies[e].sprite.id==t)return e}return-1},t}(),ct=ot;function ht(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}var ut=function(){function t(e,n,i,r,s,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._gfxLoader=e,this._dataLoader=n,this._resource=i,this._entityFactory=r,this._sceneManager=s,this._bridgeConfig=a,this._reactBridge=o}var e=t.prototype;return e.preload=function(){return(t=O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){ht(s,i,r,a,o,"next",t)}function o(t){ht(s,i,r,a,o,"throw",t)}a(void 0)}))})();var t},e.create=function(){var t=this;this._reactBridge.forceAvailableGlobal(),console.log("Welcome to the Char room"),this._reactBridge.addEntry(this._bridgeConfig.CHARSCN_NEXTSCENE,(function(){t._startScene("Arena")}),this),this._reactBridge.execute(this._bridgeConfig.CHAR_SHOWWINDOW,!0)},e.update=function(){},e.shutdown=function(){},e._startScene=function(t){this._sceneManager.startScene(t)},t}(),dt=ut;function _t(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}function lt(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){_t(s,i,r,a,o,"next",t)}function o(t){_t(s,i,r,a,o,"throw",t)}a(void 0)}))}}var ft=function(){function t(e,n,i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._gfxLoader=e,this._dataLoader=n,this._resource=i,this._entityFactory=r,this._sceneManager=s}var e=t.prototype;return e.preload=function(){var t=this;return lt(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t._entityFactory.text(414,965,"Loading",{fontSize:60,fill:"white"});var i=t._resource.createArray([{name:"preload",url:"assets/preload.json"},{name:"ui",url:"assets/ui.json"}]),r=t._resource.createArray([{name:"Fiat2",url:"assets/Fiat2.dt"}]);t._gfxLoader.addResources(i),t._gfxLoader.addResources(t._resource.createArray([{name:"back",url:"assets/back.jpg"},{name:"login",url:"assets/login.png"}])),t._gfxLoader.download((function(){}),(function(){console.log("Resolved"),t._dataLoader.addResources(r),t._dataLoader.download((function(){}),(function(){console.log("Data Resolved"),e()}))}))})));case 1:case"end":return e.stop()}}),e)})))()},e.create=function(){var t=this;this._entityFactory.text(414,965,"Loading",{fontSize:60,fill:"white"});window.ef=this._entityFactory,this._loadFiles().then((function(){t._enterStartScene()}))},e.update=function(){},e.shutdown=function(){},e._addFSListner=function(){if(this._mobileCheck()){var t=document.getElementsByTagName("canvas")[0];t&&t.addEventListener("click",(function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}),{once:!0})}},e._mobileCheck=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},e._loadFiles=function(){var t=this;return lt(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=lt(O().mark((function e(n,i){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t._resource.createArray([{name:"new_main",url:"assets/new_main.json"},{name:"wallets",url:"assets/wallets.json"},{name:"pirate",url:"assets/Pirate.json"},{name:"body",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(body).json"},{name:"face",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(face).json"},{name:"gloveb",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(gloveb).json"},{name:"hair",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(hair).json"},{name:"top",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(top).json"},{name:"bottom",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(bottom).json"},{name:"fhand",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(fhand).json"},{name:"glovef",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(glovef).json"},{name:"head",url:"fightgame.art/1-species/10-mortal/01-mortal-v01(head).json"}]),t._gfxLoader.addResources(r),t._gfxLoader.download((function(){}),(function(){console.log("Download Complete"),n()}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))()},e._enterStartScene=function(){console.log("Starting Start"),this._sceneManager.startScene("Start")},t}(),pt=ft;function yt(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}var mt=function(){function t(e,n,i,r,s,a,o,c,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._gfxLoader=e,this._dataLoader=n,this._resource=i,this._entityFactory=r,this._sceneManager=s,this._background=a,this._discord=o,this._gameAPI=c,this._wallet=h,this._button=u}var e=t.prototype;return e.preload=function(){return(t=O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){yt(s,i,r,a,o,"next",t)}function o(t){yt(s,i,r,a,o,"throw",t)}a(void 0)}))})();var t},e.create=function(){console.log("Start scene is here!"),this._background.init(0,0,"ui","entry_bg"),null!=this._wallet.account?(console.log("Logged in, moving!"),this._startArena()):(console.log("Not logged in, showing login!"),this._showLogin())},e.update=function(){},e.shutdown=function(){},e._startArena=function(){console.log("Wallets: ",this._wallet.findWallets()),this._sceneManager.startScene("Arena")},e._showLogin=function(){var t=this,e=this._wallet.findWallets();this._createWalletIcons(e,(function(){t._startArena()}))},e._createWalletIcons=function(t,e){var n=this;console.log("Wallet List: ",t),t.forEach((function(t,e){var i=n._wallet.getWalletIcon(t);if(null!=i){var r=n;n._button.createNew().init(50+200*e,200,(function(){var e=r;r._wallet.connectWallet(t).then((function(t){console.log("Successfully logged in!",t),e._startArena()}))}),"wallets",i)}}))},e._startScene=function(t){this._sceneManager.startScene(t)},t}(),gt=mt;function vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var bt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"width",get:function(){return 1920}},{key:"height",get:function(){return 1080}},{key:"displayWidth",get:function(){return document.documentElement.clientWidth}},{key:"displayHeight",get:function(){return document.documentElement.clientHeight}},{key:"showFPS",get:function(){return!0}}])&&vt(e.prototype,n),i&&vt(e,i),t}();var wt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._fooList=[],this._lastExec=0,this._maxExec=-1,this._time=200,this._completeExecutions=0}var e=t.prototype;return e.addFoo=function(t){this._fooList.push(t)},e.start=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this._lastExec=(new Date).getTime(),this._maxExec=e,this._time=t,this._completeExecutions=0,this._tryExecution()},e.update=function(){this._lastExec>0&&((new Date).getTime()-this._lastExec>=this._time&&this._tryExecution())},e._tryExecution=function(){(-1==this._maxExec||this._completeExecutions<this._maxExec)&&(this._completeExecutions++,this._lastExec=(new Date).getTime(),this._executeAll())},e._executeAll=function(){for(var t=0;t<this._fooList.length;t++){(0,this._fooList[t])()}},t}(),Dt=wt;var xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._funObj=e,this._fList=[],this._paused=0,this._lastTime=0,this._delay=0,this._oldDelay=0,this._boundExecuteAll=this._executeAll.bind(this)}var e=t.prototype;return e.addFunction=function(t,e){if(null==this._getFunObj(t,e)){var n=this._newFunObj(t,e);this._fList.push(n)}else console.error("trying to add function %s twice with identical context: ",t,e)},e.removeFunction=function(t,e){var n=this._getFunObj(t,e);null!=n?this._fList.splice(this._fList.indexOf(n),1):console.warn("Did not find loop listener with context %s, so cannot remove",e)},e.start=function(){window.requestAnimationFrame(this._boundExecuteAll)},e._executeAll=function(t){for(var e=0;e<this._fList.length;e++)this._fList[e].execute(t-this._delay);window.requestAnimationFrame(this._boundExecuteAll)},e._getFunObj=function(t,e){for(var n=0;n<this._fList.length;n++)if(t==this._fList[n].function&&this._fList[n].context==e)return this._fList[n];return console.warn("Did not find loop listener with context %",e),null},e._newFunObj=function(t,e){var n=this._funObj.createNew();return n.init(t,e),n},e._pauseAll=function(){this._paused=2},e._resumeAll=function(){this._paused=0},t}();var St=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._entityFactory=e,this._timeElapsed=0,this._timeStart=0,this._dead=[],this._active=[],this._config={x:0,y:0,maxParticle:10,sheet:"main",frame:"test",alpha:{start:1,end:.15},angle:{start:0,end:25},scale:{start:{x:.25,y:.25},end:{x:1.25,y:1.25},varianceX:{min:-1.35,max:1.35},varianceY:{min:-1.35,max:1.35}},tint:{start:{r:0,g:0,b:0},end:{r:0,g:0,b:0}},motion:{velocity:{x:2,y:3},varianceX:{min:-1.35,max:1.35},varianceY:{min:-1.35,max:1.35}},life:3e3,emitTime:1e3,emitBurst:3}}var e=t.prototype;return e.init=function(t){this._config=t,this._allocate(this._config.sheet,this._config.frame,this._config.maxParticle)},e.update=function(t){0==this._timeStart&&(this._timeStart=Date.now()),this._timeElapsed=Date.now()-this._timeStart,this._tryEmit(),this._animate()},e.shutdown=function(){this._loadDefaults()},e._tryEmit=function(){this._timeElapsed>=this._config.emitTime&&(this._timeStart=Date.now(),this._emit())},e._emit=function(){for(var t=0;t<this._config.emitBurst;t++)this._dead.length>0&&this._makeAlive()},e._animate=function(){for(var t=Date.now(),e=0;e<this._active.length;e++){var n=this._active[e],i=t-n.information.birth;i<=this._config.life?(this._moveParticle(n,i),this._scaleParticle(n,i),this._scaleAlpha(n,i),this._scaleTint(n,i),this._scaleAngle(n,i)):this._recycle(n)}},e._moveParticle=function(t,e){var n=t.information,i=e/10;t.position.x=this._config.x+n.velocity.x*i,t.position.y=this._config.y+n.velocity.y*i},e._scaleParticle=function(t,e){var n=t.information,i=n.scale.start.x,r=n.scale.start.y,s=n.scale.end.x,a=n.scale.end.y;t.display.scaleX=this._getCurrentValue(i,s,e,this._config.life),t.display.scaleX=this._getCurrentValue(r,a,e,this._config.life)},e._scaleAlpha=function(t,e){var n=t.information;t.debug,t.display.alpha=this._getCurrentValue(n.alpha.start,n.alpha.end,e,this._config.life)},e._scaleTint=function(t,e){var n=t.information;t.display.tint=this._getCurrentValueRGB(n.tint.start,n.tint.end,e,this._config.life)},e._scaleAngle=function(t,e){var n=t.information;t.position.angle=this._getCurrentValue(n.angle.start,n.angle.end,e,this._config.life)},e._getCurrentValue=function(t,e,n,i){return t+(e-t)*(n/i)},e._getCurrentValueRGB=function(t,e,n,i){var r={r:this._getCurrentValue(t.r,e.r,n,i),g:this._getCurrentValue(t.g,e.g,n,i),b:this._getCurrentValue(t.b,e.b,n,i)};return Number(this._rgbToHex(r))},e._rgbToHex=function(t){var e=parseInt(t.r).toString(16),n=parseInt(t.g).toString(16),i=parseInt(t.b).toString(16);return 1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),"0x"+e+n+i},e._allocate=function(t,e,n){for(var i=0;i<n;i++){var r=this._entityFactory.sprite(0,0,t,e);this._moveToDeath(r),this._dead.push(r),0==i&&(r.debug=!0)}},e._recycle=function(t){var e=this._active.indexOf(t);e>-1&&(this._active.splice(e,1),this._moveToDeath(t),this._dead.push(t))},e._makeAlive=function(){var t=this._dead.shift();return t?(this._addInformation(t),this._moveToInitial(t),this._active.push(t),t):null},e._moveToDeath=function(t){t.position.x=0,t.position.y=0,t.display.visible=!1},e._moveToInitial=function(t){t.position.x=this._config.x,t.position.y=this._config.y,t.display.visible=!0,t.display.scaleX=1,t.display.scaleY=1},e._addInformation=function(t){this._config&&(t.information={birth:Date.now(),scale:{start:{x:this._config.scale.start.x*this._randomize(this._config.scale.varianceX),y:this._config.scale.start.y*this._randomize(this._config.scale.varianceY)},end:{x:this._config.scale.end.x*this._randomize(this._config.scale.varianceX),y:this._config.scale.end.y*this._randomize(this._config.scale.varianceY)}},velocity:{x:this._config.motion.velocity.x*this._randomize(this._config.motion.varianceX),y:this._config.motion.velocity.y*this._randomize(this._config.motion.varianceY)},alpha:{start:this._config.alpha.start,end:this._config.alpha.end},tint:{start:this._config.tint.start,end:this._config.tint.end},angle:{start:this._config.angle.start,end:this._config.angle.end}})},e._loadDefaults=function(){this._timeElapsed=0,this._timeStart=0,this._dead=[],this._active=[],this._config={x:0,y:0,maxParticle:10,sheet:"main",frame:"test",alpha:{start:1,end:.15},angle:{start:0,end:25},scale:{start:{x:.25,y:.25},end:{x:1.25,y:1.25},varianceX:{min:-1.35,max:1.35},varianceY:{min:-1.35,max:1.35}},tint:{start:{r:0,g:0,b:0},end:{r:0,g:0,b:0}},motion:{velocity:{x:2,y:3},varianceX:{min:-1.35,max:1.35},varianceY:{min:-1.35,max:1.35}},life:3e3,emitTime:1e3,emitBurst:3}},e._randomize=function(t){for(var e=0;0==(e=this._rnd(1e3*t.min,1e3*t.max)););return e/1e3},e._rnd=function(t,e){return t=Math.ceil(t),e=Math.ceil(e),Math.floor(Math.random()*(e-t+1))+t},t}();var kt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._entities=[]}var e=t.prototype;return e.init=function(t){var e=this;window.addEventListener("resize",(function(){t.resize(document.documentElement.clientWidth,document.documentElement.clientHeight),e._onUpdate()}))},e.addEntity=function(t){this._entities.push(t)},e.clearEntities=function(){this._entities=[]},e._onUpdate=function(){for(var t=0;t<this._entities.length;t++){var e=this._entities[t];e.position.updatePosition(),e.display.updateScale()}},t}();function Ot(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name="",this._url=""}var e,n,i,r=t.prototype;return r.createNew=function(e,n){var i=new t;return i.name=e,i.url=n,i},r.createArray=function(t){for(var e=[],n=0;n<t.length;n++){var i=this.createNew(t[n].name,t[n].url);e.push(i)}return e},e=t,(n=[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"url",get:function(){return this._url},set:function(t){this._url=t}}])&&Ot(e.prototype,n),i&&Ot(e,i),t}();function Tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name="",this._scene=null}var e,n,i;return t.prototype.createNew=function(e,n){var i=new t;return i.name=e,i.scene=n,i},e=t,(n=[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"scene",get:function(){return this._scene},set:function(t){this._scene=t}},{key:"container",get:function(){return this._container},set:function(t){this._container=t}}])&&Tt(e.prototype,n),i&&Tt(e,i),t}();function Et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var jt=function(){function t(e,n,i,r,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._screen=e,this._position=n,this._display=i,this._input=r,this._foreignObject=s,this._scaleManager=a,this._defaultTime=-1,this._timeSlotA=this._defaultTime,this._timeSlotB=this._defaultTime,this._timeSlotC=this._defaultTime,this._timeSlotD=this._defaultTime,this._timeSlotE=this._defaultTime,this._graphics=null,this._id=0,this._body=null}var e,n,i,r=t.prototype;return r.enableInput=function(){this._input.init(this._foreignObject)},r.destroy=function(){this._display.destroy(),this._input.destroy()},r.drawDebug=function(){null==this._graphics&&(this._graphics=this._screen.createGraphics(),this.addObject(this._graphics));var t=this.position.scale.placeX(this.body.position.x+this.position.camera.x)-this.display.width,e=this.position.scale.placeY(this.body.position.y+this.position.camera.y)-this.display.height;this._screen.drawRect(this._graphics,t,e,this.display.width,this.display.height,null)},r._activate=function(t,e,n){this._position.init(t,e,n),this._display.init(n),this._foreignObject=n},e=t,(n=[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"timeSlotA",get:function(){return this._timeSlotA},set:function(t){this._timeSlotA=t}},{key:"timeSlotB",get:function(){return this._timeSlotB},set:function(t){this._timeSlotB=t}},{key:"timeSlotC",get:function(){return this._timeSlotC},set:function(t){this._timeSlotC=t}},{key:"timeSlotD",get:function(){return this._timeSlotD},set:function(t){this._timeSlotD=t}},{key:"timeSlotE",get:function(){return this._timeSlotE},set:function(t){this._timeSlotE=t}},{key:"defaultTime",get:function(){return this._defaultTime}},{key:"information",get:function(){return this._information},set:function(t){this._information=t}},{key:"position",get:function(){return this._position}},{key:"display",get:function(){return this._display}},{key:"input",get:function(){return this._input}},{key:"body",get:function(){return this._body},set:function(t){this._body=t}},{key:"foreignObject",get:function(){return this._foreignObject}}])&&Et(e.prototype,n),i&&Et(e,i),t}();function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function At(t,e){return!e||"object"!==Nt(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nt=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Rt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Mt(t);if(e){var r=Mt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return At(this,n)}}var Ft=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(n,t);var e=Rt(n);function n(t,i,r,s,a,o,c){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(h=e.call(this,o,t,i,r,a,s))._abstractObject=a,h._screen=o,h._sceneManager=c,h}var i=n.prototype;return i.addObject=function(t){this._sceneManager.addObject(t)},i.init=function(t,e,n){var i=this._screen.createCustomSprite(n);i.parentObject=this,this._sceneManager.addObject(i),this._activate(t,e,i),window.fobject=i,this._scaleManager.addEntity(this)},i.setAnimation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._foreignObject.setAnimation(t,e,n)},i.createNew=function(){var t=this._position.createNew(),e=this._display.createNew(),i=this._input.createNew(),r=this._abstractObject.createNew();return new n(t,e,i,this._scaleManager,r,this._screen,this._sceneManager)},n}(jt),Wt=Ft;function Xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x1=0,this._y1=0,this._x2=0,this._y2=0,this._vx=0,this._vy=0,this._canCollide=!0,this._foreignObject=e,this._abstractObject=e,this.data=null}var e,n,i,r=t.prototype;return r.init=function(t){this._foreignObject=t},r.createNew=function(){return new t(this._abstractObject.createNew())},e=t,(n=[{key:"canCollide",get:function(){return this._canCollide},set:function(t){this._canCollide=t}},{key:"x1",get:function(){return this._x1},set:function(t){this._x1=t}},{key:"x2",get:function(){return this._x2},set:function(t){this._x2=t}},{key:"y1",get:function(){return this._y1},set:function(t){this._y1=t}},{key:"y2",get:function(){return this._y2},set:function(t){this._y2=t}},{key:"vx",get:function(){return this._vx},set:function(t){this._vx=t}},{key:"vy",get:function(){return this._vy},set:function(t){this._vy=t}}])&&Xt(e.prototype,n),i&&Xt(e,i),t}();function Yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var It=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._foreignObject=e,this._abstractObject=e,this._scale=n,this._screen=i,this._alpha=1,this._visible=!0,this._scaleX=1,this._scaleY=1,this._scaleMode={x:R.normal,y:R.normal,modifier:1},this._containerMode=N.gameplay}var e,n,i,r=t.prototype;return r.setScaleMode=function(t,e,n){this._scaleMode.x=t,this._scaleMode.y=e,this._scaleMode.modifier=n,this._updateScale()},r.fitInsideContainer=function(t){this._containerMode=t?N.gameplay:N.global,this._updateScale()},r.destroy=function(){this._foreignObject.destroy()},r.updateTexture=function(t,e){this._screen.updateTexture(this._foreignObject,t,e)},r.init=function(t){this._foreignObject=t,this.alpha=1,this.visible=!0,this._scale.init(this._foreignObject),this._updateScale()},r.createNew=function(){return new t(this._abstractObject.createNew(),this._scale.createNew(),this._screen)},r.updateScale=function(){this._updateScale()},r._updateScale=function(){this._scale.mode.sizeMode=this._scaleMode,this._scale.mode.containerMode=this._containerMode,this._scale.x=this._scaleX,this._scale.y=this._scaleY,this._updateDisplay()},r._sendPositive=function(t){return t<0?-1*t:t},r._updateDisplay=function(){this._foreignObject.alpha=this._alpha,this._foreignObject.visible=this._visible,this._foreignObject.scale.x=this._scale.resizeX(this._scaleX),this._foreignObject.scale.y=this._scale.resizeY(this._scaleY)},e=t,(n=[{key:"tint",get:function(){return this._foreignObject.tint},set:function(t){this._foreignObject.tint=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t,this._updateDisplay()}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=t,this._updateDisplay()}},{key:"width",get:function(){return this._sendPositive(this._scale.reverseScale(this._foreignObject.width))}},{key:"height",get:function(){return this._sendPositive(this._scale.reverseScale(this._foreignObject.height))}},{key:"inGameWidth",get:function(){return this._foreignObject.width}},{key:"inGameHeight",get:function(){return this._foreignObject.height}},{key:"scaleX",get:function(){return this._scaleX},set:function(t){this._scaleX=t,this._updateScale()}},{key:"scaleY",get:function(){return this._scaleY},set:function(t){this._scaleY=t,this._updateScale()}}])&&Yt(e.prototype,n),i&&Yt(e,i),t}();var Bt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._foreignObject=e,this._abstractObject=e,this._onMouseUp=[],this._onKeyDown=[],this._onKeyUp=[],this._onKeyDownOnce=[],this._onKeyUpTemp=[],this._currentDown={}}var e=t.prototype;return e.addMouseUp=function(t){this._onMouseUp.push(t)},e.addKeyUp=function(t,e){this._onKeyUp.push({key:t,foo:e})},e.addKeyDown=function(t,e){this._onKeyDown.push({key:t,foo:e})},e.addKeyDownOnce=function(t,e){this._onKeyDownOnce.push({key:t,foo:e})},e.init=function(t){this._foreignObject=t,this._foreignObject.interactive=!0,this._addListeners(t)},e.createNew=function(){return new t(this._abstractObject.createNew())},e.destroy=function(){this._onMouseUp=[],this._onKeyUp=[],this._onKeyDownOnce=[],this._onKeyUpTemp=[],this._onKeyDown=[]},e.isDown=function(t){var e=this,n=[];return Object.keys(this._currentDown).forEach((function(i){i==t&&1==e._currentDown[i]&&n.push(i)})),n.length>0},e._addListeners=function(t){this._addMouseListners(t),this._addKeyboardListners()},e._addMouseListners=function(t){var e=this;this._foreignObject.on("pointerup",(function(){e._executeMouseUp()}))},e._addKeyboardListners=function(){var t=this;document.addEventListener("keydown",(function(e){t._executeKeyDown(e.code),t._executeKeyDownOnce(e.code),t._currentDown[e.code]=!0})),document.addEventListener("keyup",(function(e){t._executeKeyUp(e.code),t._executekeyUpTemp(e.code),t._currentDown[e.code]=!1,delete t._onMouseUp[0]}))},e._executeKeyDown=function(t){this._executeKey(t,this._onKeyDown)},e._executeKeyUp=function(t){this._executeKey(t,this._onKeyUp)},e._executeKeyDownOnce=function(t){var e=this._executeKey(t,this._onKeyDownOnce,!0);this._addArray(e,this._onKeyUpTemp)},e._executekeyUpTemp=function(t){var e=this._executeKey(t,this._onKeyUpTemp,!0,!1);this._addArray(e,this._onKeyDownOnce)},e._addArray=function(t,e){for(var n=0;n<t.length;n++)e.push(t[n])},e._executeKey=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[],s=e.length-1;s>=0;s--){var a=e[s];a.key==t&&i&&a.foo(),n&&(e.splice(s,1),r.push(a))}return r},e._executeMouseUp=function(){for(var t=0;t<this._onMouseUp.length;t++){(0,this._onMouseUp[t])()}},t}(),Ht=Bt;function Gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Kt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._foreignObject=e,this._abstractObject=e,this._text="",this._style={}}var e,n,i,r=t.prototype;return r.init=function(t,e,n){this._foreignObject=n,this.text=t,this.style=e},r.createNew=function(){return new t(this._abstractObject.createNew())},r._updateForeignObject=function(){this._foreignObject.text=this._text,this._foreignObject.style=this._style},e=t,(n=[{key:"text",get:function(){return this._text},set:function(t){this._text=t,this._updateForeignObject()}},{key:"style",get:function(){return this._style},set:function(t){this._style=t,this._updateForeignObject()}}])&&Gt(e.prototype,n),i&&Gt(e,i),t}();function zt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Vt=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._foreignObject=e,this._abstractObject=e,this._scale=n,this._camera=i,this._screen=r,this._x=0,this._y=0,this._angle=0,this._anchorX=0,this._anchorY=0,this._scaleMode={x:L.left,y:L.left,modifier:1},this._containerMode=N.gameplay,this._trackX=function(){},this._trackY=function(){},this._disableCamera=!1}var e,n,i,r=t.prototype;return r.setScaleMode=function(t,e,n){this._scaleMode.x=t,this._scaleMode.y=e,this._scaleMode.modifier=n,this._updatePosition()},r.fitInsideContainer=function(t){this._containerMode=t?N.gameplay:N.global,this._updatePosition()},r.init=function(t,e,n){this._foreignObject=n,this.x=t,this.y=e},r.createNew=function(){return new t(this._abstractObject.createNew(),this._scale.createNew(),this._camera,this._screen)},r.updatePosition=function(){this._updatePosition()},r._updatePosition=function(){this._scale.mode.positionMode=this._scaleMode,this._scale.mode.containerMode=this._containerMode,this._disableCamera?(this._foreignObject.x=this._scale.placeX(this._x),this._foreignObject.y=this._scale.placeY(this._y)):(this._foreignObject.x=this._scale.placeX(this._camera.x+this._x),this._foreignObject.y=this._scale.placeY(this._camera.y+this._y)),this._foreignObject.angle=this._angle,this._foreignObject.anchor.set(this._anchorX,this._anchorY)},e=t,(n=[{key:"disableCamera",get:function(){return this._disableCamera},set:function(t){this._disableCamera=t}},{key:"scale",get:function(){return this._scale}},{key:"camera",get:function(){return this._camera}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._updatePosition(),this._trackX(this.x)}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._updatePosition(),this._trackY(this.y)}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t,this._updatePosition()}},{key:"anchorX",get:function(){return this._anchorX},set:function(t){this._anchorX=t,this._updatePosition()}},{key:"anchorY",get:function(){return this._anchorY},set:function(t){this._anchorY=t,this._updatePosition()}},{key:"mouseX",get:function(){return this._scale.convertPlaceX(this._screen.mouse.mouse.global.x)}},{key:"mouseY",get:function(){return this._scale.convertPlaceY(this._screen.mouse.mouse.global.y)}},{key:"trackX",set:function(t){this._trackX=t}},{key:"trackY",set:function(t){this._trackY=t}}])&&zt(e.prototype,n),i&&zt(e,i),t}();function qt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Jt=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._scaleMode=n,this._foreignObject=i,this._abstractObject=i,this._x=1,this._y=1}var e,n,i,r=t.prototype;return r.init=function(t){this._foreignObject=t},r.reverseScale=function(t){return t/this._getRatio()},r.scale=function(t){return t*this._getRatio()},r.resizeX=function(t){return this._scaleMode.sizeMode.x==R.fill?this._preserveSign(this._getFillXScale(),t):this._scaleMode.sizeMode.x==R.maintain_ratio?this._preserveSign(this._foreignObject.scale.y,t):this._preserveSign(t*this._x*this._getRatio(),t)},r.resizeY=function(t){return this._scaleMode.sizeMode.y==R.fill?this._preserveSign(this._getFillYScale(),t):this._scaleMode.sizeMode.y==R.maintain_ratio?this._preserveSign(this._foreignObject.scale.x,t):this._preserveSign(t*this._y*this._getRatio(),t)},r.convertPlaceX=function(t){var e=this._getContainerXStart();return t*this._getRatio()-e},r.convertPlaceY=function(t){var e=this._getContainerYStart();return t*this._getRatio()-e},r.placeX=function(t){var e=this._getContainerXStart();return this._scaleMode.positionMode.x==L.left||(e=this._scaleMode.positionMode.x==L.center?this._getScreen().x/2:this._getScreen().x),e+this._getRatio()*t},r.placeY=function(t){var e=this._getContainerYStart();return this._scaleMode.positionMode.y==L.left||(e=this._scaleMode.positionMode.y==L.center?this._getScreen().y/2:this._getScreen().y),e+this._getRatio()*t},r.createNew=function(){return new t(this._config,this._scaleMode.createNew(),this._abstractObject.createNew())},r._preserveSign=function(t,e){return e<0&&t>0||e>0&&t<0?-1*t:t},r._getFillXScale=function(){var t=this.originalWidth;return this._config.displayWidth/t},r._getFillYScale=function(){var t=this.originalHeight;return this._config.displayHeight/t},r._getContainerXStart=function(){if(this._scaleMode.containerMode==N.gameplay){var t=this._getScreen();return(this._getCurrentXY().x-t.x)/2}return 0},r._getContainerYStart=function(){if(this._scaleMode.containerMode==N.gameplay){var t=this._getScreen();return(this._getCurrentXY().y-t.y)/2}return 0},r._getScreen=function(){return this._scaleMode.containerMode==N.gameplay?this._getContainerXY():this._getCurrentXY()},r._getContainerXY=function(){var t=this._getOriginalXY(),e=this._getRatio();return{x:t.x*e,y:t.y*e}},r._getRatio=function(){var t=this._getOriginalXY(),e=this._getCurrentXY(),n=e.y/t.y,i=e.x/t.x;return n*t.x<=e.x?n:i},r._getOriginalXY=function(){return{x:this._config.width,y:this._config.height}},r._getCurrentXY=function(){return{x:document.documentElement.clientWidth,y:document.documentElement.clientHeight}},e=t,(n=[{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"mode",get:function(){return this._scaleMode}},{key:"originalWidth",get:function(){return this._foreignObject.width/this._foreignObject.scale.x}},{key:"originalHeight",get:function(){return this._foreignObject.height/this._foreignObject.scale.y}}])&&qt(e.prototype,n),i&&qt(e,i),t}();var Qt=function(){function t(e,n,i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._sprite=e,this._spine=n,this._text=i,this._tweenJS=r,this._character=s}var e=t.prototype;return e.sprite=function(t,e,n,i){var r=this._sprite.createNew();return r.init(t,e,n,i),r},e.spine=function(t,e,n){var i=this._spine.createNew();return i.init(t,e,n),i},e.text=function(t,e,n,i){var r=this._text.createNew();return r.init(t,e,n,i),r},e.tween=function(t,e,n,i,r){return this._tweenJS.createTween(t,e,n,i,r)},e.character=function(t,e,n){var i=this._character.createNew();return i.init(t,e,n),i},t}();function Zt(t){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $t(t,e){return!e||"object"!==ee(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ee=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ne(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Zt(t);if(e){var r=Zt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return $t(this,n)}}var ie=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(n,t);var e=ne(n);function n(t,i,r,s,a,o,c){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(h=e.call(this,o,t,i,r,a,s))._abstractObject=a,h._screen=o,h._sceneManager=c,h}var i=n.prototype;return i.addObject=function(t){this._sceneManager.addObject(t)},i.init=function(t,e,n){var i=this._screen.createSpine(n);i.parentObject=this,console.log("Foreign Object: ",i),this._sceneManager.addObject(i),this._activate(t,e,i),window.fobject=i,this._scaleManager.addEntity(this)},i.hasAnimation=function(t){return this._foreignObject.state.hasAnimation(t)},i.getCurrentAnimation=function(){var t=this._foreignObject.state.getCurrent(0);return null!=t?t.animation.name:null},i.setAnimation=function(t,e){this._foreignObject.state.setAnimation(0,t,e)},i.setTimeScale=function(t){this._foreignObject.state.timeScale=t},i.createNew=function(){var t=this._position.createNew(),e=this._display.createNew(),i=this._input.createNew(),r=this._abstractObject.createNew();return new n(t,e,i,this._scaleManager,r,this._screen,this._sceneManager)},n}(jt);function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t,e){return!e||"object"!==oe(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function ce(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=re(t);if(e){var r=re(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return se(this,n)}}var he=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(n,t);var e=ce(n);function n(t,i,r,s,a,o,c){var h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(h=e.call(this,o,t,i,r,a,s))._abstractObject=a,h._screen=o,h._sceneManager=c,h}var i=n.prototype;return i.addObject=function(t){this._sceneManager.addObject(t)},i.init=function(t,e,n,i){var r=this._screen.createSprite(n,i);r.parentObject=this,this._sceneManager.addObject(r),this._activate(t,e,r),window.fobject=r,this._scaleManager.addEntity(this)},i.createNew=function(){var t=this._position.createNew(),e=this._display.createNew(),i=this._input.createNew(),r=this._abstractObject.createNew();return new n(t,e,i,this._scaleManager,r,this._screen,this._sceneManager)},n}(jt);function ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e){return!e||"object"!==fe(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t,e){return(le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fe=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function pe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=de(t);if(e){var r=de(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _e(this,n)}}var ye=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&le(t,e)}(n,t);var e=pe(n);function n(t,i,r,s,a,o,c,h){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(u=e.call(this,o,t,i,r,a,h))._label=s,u._abstractObject=a,u._screen=o,u._sceneManager=c,u}var i,r,s,a=n.prototype;return a.addObject=function(t){this._sceneManager.addObject(t)},a.init=function(t,e,n,i){var r=this._screen.createText(n,i);this._sceneManager.addObject(r.data),this._activate(t,e,r),this._label.init(n,i,r)},a.createNew=function(){return new n(this._position.createNew(),this._display.createNew(),this._input.createNew(),this._label.createNew(),this._abstractObject.createNew(),this._screen,this._sceneManager,this._scaleManager)},i=n,(r=[{key:"label",get:function(){return this._label}}])&&ue(i.prototype,r),s&&ue(i,s),n}(jt);var me=function(){function t(e,n,i,r,s,a,o,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._loop=n,this._screen=i,this._sceneManager=r,this._loading=s,this._arena=a,this._char=o,this._start=c}var e=t.prototype;return e.startGame=function(){this._screen.startRenderer(document.documentElement.clientWidth,document.documentElement.clientHeight,!0,!1),this._startLoop(),this._initScenes(),this._startFirstScene()},e._startLoop=function(){this._loop.start()},e._initScenes=function(){this._sceneManager.init(),this._sceneManager.addScene("Loading",this._loading),this._sceneManager.addScene("Arena",this._arena),this._sceneManager.addScene("Char",this._char),this._sceneManager.addScene("Start",this._start)},e._startFirstScene=function(){this._sceneManager.startScene("Loading")},t}();function ge(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ve=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i,r=t.prototype;return r.createNew=function(){return new t},r.on=function(t,e){},r.setAnimation=function(t){},r._denyAccess=function(){console.error("Can not access the AbstractGameObject!")},e=t,(n=[{key:"x",get:function(){return this._denyAccess(),0},set:function(t){this._denyAccess()}},{key:"y",get:function(){return this._denyAccess(),0},set:function(t){this._denyAccess()}},{key:"angle",get:function(){return this._denyAccess(),0},set:function(t){this._denyAccess()}},{key:"visible",get:function(){return this._denyAccess(),!0},set:function(t){this._denyAccess()}},{key:"alpha",get:function(){return this._denyAccess(),1},set:function(t){this._denyAccess()}},{key:"interactive",get:function(){return this._denyAccess(),!1},set:function(t){this._denyAccess()}},{key:"style",get:function(){return this._denyAccess(),{}},set:function(t){this._denyAccess()}},{key:"text",get:function(){return this._denyAccess(),""},set:function(t){this._denyAccess()}},{key:"data",get:function(){return this._denyAccess(),{}},set:function(t){this._denyAccess()}},{key:"destroy",get:function(){return this._denyAccess(),{}},set:function(t){this._denyAccess()}},{key:"anchor",get:function(){return this._denyAccess(),{}}},{key:"width",get:function(){return this._denyAccess(),0},set:function(t){this._denyAccess()}},{key:"height",get:function(){return this._denyAccess(),0},set:function(t){this._denyAccess()}},{key:"scale",get:function(){return this._denyAccess(),{x:1,y:1}},set:function(t){this._denyAccess()}},{key:"tint",get:function(){return this._denyAccess(),1},set:function(t){this._denyAccess()}},{key:"parentObject",get:function(){return this._denyAccess(),this},set:function(t){this._denyAccess()}}])&&ge(e.prototype,n),i&&ge(e,i),t}();function be(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}function we(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){be(s,i,r,a,o,"next",t)}function o(t){be(s,i,r,a,o,"throw",t)}a(void 0)}))}}var De=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=[]}var e=t.prototype;return e.getData=function(t){for(var e=0;e<this._data.length;e++){var n=this._data[e];if(n.resource.name==t)return n.data.data}return null},e.addResources=function(t){for(var e=0;e<t.length;e++){var n=t[e];this._data.push({resource:n,data:null})}},e.download=function(t,e){var n=this;return we(O().mark((function i(){return O().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(){var i=we(O().mark((function i(r,s){var a,o;return O().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=0;case 1:if(!(a<n._data.length)){i.next=10;break}return i.next=4,n._downloadFile(n._data[a].resource.url);case 4:o=i.sent,n._data[a].data=o,t(a/n._data.length);case 7:a++,i.next=1;break;case 10:e(n._data),r(n._data);case 12:case"end":return i.stop()}}),i)})));return function(t,e){return i.apply(this,arguments)}}()));case 1:case"end":return i.stop()}}),i)})))()},e._downloadFile=function(t){return we(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);e({satus:"success",data:t})}},i.onerror=function(){n({status:"error"})},i.send()})));case 1:case"end":return e.stop()}}),e)})))()},t}(),xe=De;function Se(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}var ke=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pixiLayer=e}var e=t.prototype;return e.addResources=function(t){this._pixiLayer.addImages(t)},e.download=function(t,e){var n,i=this;return(n=O().mark((function n(){return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",i._pixiLayer.downloadResources(t,e));case 1:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(i,r){var s=n.apply(t,e);function a(t){Se(s,i,r,a,o,"next",t)}function o(t){Se(s,i,r,a,o,"throw",t)}a(void 0)}))})()},t}(),Oe=ke,Pe=n(1837);function Te(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e){return!e||"object"!==Me(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Me=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Ae(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ce(t);if(e){var r=Ce(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ee(this,n)}}var Le=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(n,t);var e=Ae(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this))._anchorX=0,t._anchorY=0,t._currentAnimation="",t._sprites=[],t._init=!1,t.anchor={set:function(e,n){t.anchorX=e,t.anchorY=n}},t}var i,r,s,a=n.prototype;return a.init=function(t){var e=this;t.forEach((function(t){var n=Pe.aNw.shared.resources[t].spritesheet,i=null;console.log("sheet.textures",t);var r=[];n&&n.textures&&(r=e._turnArray(null===n||void 0===n?void 0:n.textures)),n&&null!=r[0]&&((i=new Pe.KgH([r[0]])).anchor.x=0,i.anchor.y=0,i.y=0,i.x=0),e._sprites.push({sprite:null,sheet:n,sheetKey:t})}))},a._getSpeed=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=1;if(null!=e)for(var i in e)i==t&&(n=e[i]);return console.log("Sending speed for sprite ".concat(t," = ").concat(n)),n},a.setAnimation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this;if(this._currentAnimation!==t){var r=!1;this._sprites.forEach((function(r){var s,a=null===(s=r.sheet)||void 0===s?void 0:s.animations[t];if(a)r.sprite?r.sprite.textures=a:(r.sprite=new Pe.KgH(a),i.addChild(r.sprite)),r.sprite.animationSpeed=i._getSpeed(r.sheetKey,n),r.sprite.play();else{var o,c,h=null;(null===(o=r.sheet)||void 0===o?void 0:o.animations)&&(h=i._turnArray(null===(c=r.sheet)||void 0===c?void 0:c.animations)[0]),h&&(r.sprite?r.sprite.textures=h:(r.sprite=new Pe.KgH(h),i.addChild(r.sprite)),r.sprite.animationSpeed=e,r.sprite.play())}})),r&&(this._currentAnimation=t)}},a._turnArray=function(t){var e=Object.keys(t),n=[];return e.forEach((function(e){n.push(t[e])})),n},i=n,(r=[{key:"anchorX",get:function(){return this._anchorX},set:function(t){this._anchorX=t,this.pivot.x=t*this.width/this.scale.x}},{key:"anchorY",get:function(){return this._anchorY},set:function(t){this._anchorY=t,this.pivot.y=t*this.height/this.scale.y}}])&&Te(i.prototype,r),s&&Te(i,s),n}(Pe.W20),Ne=Le,Re=n(8925);function Fe(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}function We(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Xe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._app=null,this._pxText=e}var e,n,i,r=t.prototype;return r.createApplication=function(t,e,n,i){var r=1;i&&(r=0);var s=new Pe.MxU({width:t,height:e,antialias:n,backgroundAlpha:r});window.pixiDivTarget?window.pixiDivTarget.appendChild(s.view):document.body.appendChild(s.view),this._app=s},r.createCustomSprite=function(){return new Ne},r.createContainer=function(){return new Pe.W20},r.createGraphics=function(){return new Pe.TCu},r.drawRect=function(t,e,n,i,r){t.clear(),t.lineStyle(5,16776960),t.drawRect(e,n,i,r)},r.createText=function(t,e){var n=this._pxText.createNew();return n.init(t,this._app.renderer,e),n},r.createParticleContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return new Pe.TYe(t,e,n,i)},r.createSprite=function(t,e){var n=this._getTexture(t,e);return n?new Pe.jyi(n):null},r.createSpine=function(t){var e=this._getSpineData(t);return e?new Re.PY(e):null},r.updateTexture=function(t,e,n){var i=this._getTexture(e,n);i&&(t.texture=i)},r.addObject=function(t,e){t.addChild(e)},r.removeObject=function(t,e){t.removeChild(e)},r.addImages=function(t){this._addResources(t)},r.addAtlases=function(t){this._addResources(t)},r.downloadResources=function(t,e){return(n=O().mark((function n(){return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,i){Pe.aNw.shared.onProgress.once((function(){t(Pe.aNw.shared.progress)})),Pe.aNw.shared.load((function(t,i){n(i),window.loader=Pe.aNw.shared,e()}))})));case 1:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(i,r){var s=n.apply(t,e);function a(t){Fe(s,i,r,a,o,"next",t)}function o(t){Fe(s,i,r,a,o,"throw",t)}a(void 0)}))})();var n},r._turnArray=function(t){var e=Object.keys(t),n=[];return e.forEach((function(e){n.push(t[e])})),n},r._addResources=function(t){for(var e=0;e<t.length;e++){var n=this,i=t[e].name,r=t[e].url;Pe.aNw.shared.use((function(t,e){if("json"===t.extension&&null!=t.data.meta&&t.data.meta.app.indexOf("aseprite")>-1){var i=!0,r=!1,s=void 0;try{for(var a,o=t.data.meta.frameTags[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){for(var c=a.value,h=[],u=n._turnArray(t.data.frames),d=n._turnArray(t.textures),_=c.from;_<c.to;_++)null!=u[_]&&h.push({texture:d[_],time:u[_].duration});if("pingpong"===c.direction)for(var l=c.to;l>=c.from;l--)null!=u[l]&&h.push({texture:d[l],time:u[l].duration});t.spritesheet.animations[c.name]=h}}catch(f){r=!0,s=f}finally{try{i||null==o.return||o.return()}finally{if(r)throw s}}}e()})).add(i,r)}},r._getTexture=function(t,e){if(e){var n=Pe.aNw.shared.resources[t].spritesheet;return n?n.textures[e]:(console.error("NO spritesheet '%s' found!",t),null)}return Pe.xEZ.from(t)},r._getSpineData=function(t){var e=Pe.aNw.shared.resources[t];return e?e.spineData:null},e=t,(n=[{key:"renderer",get:function(){return this._app?this._app.renderer:null}},{key:"fps",get:function(){return Pe.vB5.shared.FPS}},{key:"stage",get:function(){return this._app?this._app.stage:null}},{key:"mouse",get:function(){return this._app?this._app.renderer.plugins.interaction:null}}])&&We(e.prototype,n),i&&We(e,i),t}(),Ue=Xe;function Ye(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ie=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=0,this._y=0,this._onUpdateX=function(){},this._onUpdateY=function(){}}var e,n,i,r=t.prototype;return r.createNew=function(e,n,i,r){var s=new t;return s.x=e,s.y=n,s.onUpdateX=i,s.onUpdateY=r,s},r.setTo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._x=t,this._onUpdateX(t),null!=e&&(this._y=e,this._onUpdateY(e))},r.set=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._x=t,this._onUpdateX(t),null!=e&&(this._y=e,this._onUpdateY(e))},e=t,(n=[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onUpdateX(t)}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onUpdateY(t)}},{key:"onUpdateX",set:function(t){this._onUpdateX=t}},{key:"onUpdateY",set:function(t){this._onUpdateY=t}}])&&Ye(e.prototype,n),i&&Ye(e,i),t}(),Be=Ie;function He(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ge=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pxPoint=e,this._data=null,this._renderer=null,this._scale=null,this._anchor=null,this._rawText=null}var e,n,i,r=t.prototype;return r.createNew=function(){return new t(this._pxPoint.createNew(1,1,(function(){}),(function(){})))},r.init=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;this._renderer=e,this._style=n,this._fill=n.fill,this._rawText=new Pe.xvT(t,n),this._data=new Pe.jyi(this._renderer.generateTexture(this._rawText,Pe.aH$.LINEAR,1)),this._scale=this._pxPoint.createNew(1,1,(function(t){null!=i._data&&(i._data.scale.x=t)}),(function(t){null!=i._data&&(i._data.scale.y=t)})),this._anchor=this._pxPoint.createNew(1,1,(function(t){null!=i._data&&(i._data.anchor.x=t)}),(function(t){null!=i._data&&(i._data.anchor.y=t)}))},r.addChild=function(t){this.data.addChild(t)},r.removeChild=function(t){this.data.removeChild(t)},r.updateTexture=function(){this._updateTexture()},r._updateTexture=function(){null!=this._data&&null!=this._renderer&&null!=this._rawText?this._data.texture=this._renderer.generateTexture(this._rawText,Pe.aH$.LINEAR,1):console.error("Can not update text texture before init!")},r.destroy=function(){this._data&&this._data.destroy(),this._rawText&&this._rawText.destroy()},e=t,(n=[{key:"visible",get:function(){return null!==this._data&&this._data.visible},set:function(t){null!==this._data&&(this._data.visible=t)}},{key:"width",get:function(){return this._data?this._data.width:-1},set:function(t){this._data&&(this._data.width=t)}},{key:"pivot",get:function(){if(this._data)return this._data.pivot},set:function(t){this._data&&(this._data.pivot=t)}},{key:"height",get:function(){return this._data?this._data.height:-1},set:function(t){this._data&&(this._data.height=t)}},{key:"style",get:function(){return this._style},set:function(t){this._style=t,this._rawText&&(this._rawText.style=t,this._fill=t.fill),this.updateTexture()}},{key:"text",get:function(){return this._rawText?this._rawText.text:""},set:function(t){this._rawText&&(this._rawText.text=t,this.updateTexture())}},{key:"fill",get:function(){return this._fill},set:function(t){this._style.fill=t,this._fill=this._style.fill,null!==this._rawText&&void 0!==this._rawText&&(this._rawText.style=this._style),this.updateTexture()}},{key:"data",get:function(){return null!=this._data?this._data:(console.error("Can not access data before initializing text!"),null)}},{key:"scale",get:function(){return this._scale}},{key:"alpha",get:function(){return this._data?this._data.alpha:(console.warn("cannot return alpha for object that is not initialized!"),-1)},set:function(t){this._data&&(this._data.alpha=t)}},{key:"anchor",get:function(){return this._anchor}},{key:"x",get:function(){return null!=this._data?this._data.x:(console.error("Can not access data before initializing text!"),0)},set:function(t){null!=this._data?this._data.x=t:console.error("Can not access data before initializing text!")}},{key:"y",get:function(){return null!=this._data?this._data.y:(console.error("Can not access data before initializing text!"),0)},set:function(t){null!=this._data?this._data.y=t:console.error("Can not access data before initializing text!")}}])&&He(e.prototype,n),i&&He(e,i),t}(),Ke=Ge;function ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ve=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"CHAR_SHOWWINDOW",get:function(){return"CHAR_SHOWWINDOW"}},{key:"CHAT_SENDMESSAGE",get:function(){return"CHAT_SENDMESSAGE"}},{key:"CHAT_SHOWWINDOW",get:function(){return"CHAT_SHOWWINDOW"}},{key:"CHAT_UPDATEDATA",get:function(){return"CHAT_UPDATEDATA"}},{key:"CHAT_SHOWWINDOWSTATUSPROP",get:function(){return"CHAT_SHOWWINDOWSTATUSPROP"}},{key:"CHAT_SENDNOW",get:function(){return"CHAT_SENDNOW"}},{key:"INFO_SHOWWINDOW",get:function(){return"INFO_SHOWWINDOW"}},{key:"CHAR_SELUPDATE",get:function(){return"CHAR_SELUPDATE"}},{key:"FRIEND_SHOWWINDOW",get:function(){return"FRIEND_SHOWWINDOW"}},{key:"EQU_SHOWWINDOW",get:function(){return"EQU_SHOWWINDOW"}},{key:"EQU_SELUPDATE",get:function(){return"EQU_SELUPDATE"}},{key:"CHARSCN_NEXTSCENE",get:function(){return"CHARSCN_NEXTSCENE"}}])&&ze(e.prototype,n),i&&ze(e,i),t}();var qe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._entries={bridge:[]}}var e=t.prototype;return e.forceAvailableGlobal=function(){this._entries=this.globalState},e.changeGlobal=function(t){this._entries=t},e.execute=function(t,e){var n=this._getElement(t);n&&n.fun.forEach((function(t,n){null!=e?t.executable(e):t.executable()}))},e.getValue=function(t,e){var n,i=this._getElement(t);return i?(i.fun.forEach((function(t,i){n=null!=e?t.executable(e):t.executable()})),n):null},e.addEntry=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={function:e,context:n,executable:this._bindFunction(e,n)},s={name:t,fun:[r]},a=this._getElement(t);a?(i&&(a.fun=[]),a.fun.push(r)):this._entries.bridge.push(s)},e.removeEntry=function(t,e,n){var i=this._getElement(t);if(null!=i){var r=-1;i.fun.forEach((function(t,n){t.function==e&&(r=n)})),r>-1&&i.fun.splice(r,1)}},e._getElement=function(t){var e=this._findEntry(t);return e>-1?this._entries.bridge[e]:null},e._findEntry=function(t){var e=-1;return this._entries.bridge.forEach((function(n,i){n.name==t&&(e=i)})),e},e._bindFunction=function(t,e){return null!=e?t.bind(e):t},t}(),Je=qe;var Qe=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pixiLayer=e,this._sceneData=n,this._scaleManager=r,this._loop=i,this._currentScene=null,this._canUpdate=!1,this._sceneList=[],this._parentObjectList=[]}var e=t.prototype;return e.init=function(){this._loop.addFunction(this._update,this),this._scaleManager.init(this._pixiLayer.renderer)},e.addScene=function(t,e){this._exists(t)?console.error("Scene name '%s' already exists!",t):this._addScene(t,e)},e.startScene=function(t){var e=this._getScene(t);e?this._handleSceneStart(e):console.error("No scene with the name '%s' found",t)},e.addObject=function(t){this._currentScene&&(null!=t.parentObject&&this._parentObjectList.push(t.parentObject),this._pixiLayer.addObject(this._currentScene.container,t))},e.removeObject=function(t){this._currentScene&&this._pixiLayer.removeObject(this._currentScene.container,t)},e._update=function(t){this._currentScene&&this._canUpdate&&this._currentScene.scene.update(t)},e._addScene=function(t,e){var n=this._createSceneData(t,e);n.container=this._createContainer(),this._sceneList.push(n)},e._handleSceneStart=function(t){var e=this;if(null!=this._currentScene&&(this._scaleManager.clearEntities(),this._currentScene.scene.shutdown()),this._pixiLayer.stage){var n=this._pixiLayer.stage.children[0];if(n){for(var i=0;i<n.children.length;i++){var r=n.children[i];window.dobject=r,r.destroy()}for(var s=0;s<this._parentObjectList.length;s++)console.log("Destroying!"),null!=this._parentObjectList[s].transform&&(this._parentObjectList[s].destroy(),console.log("destroyed parent list!"))}this._pixiLayer.stage.removeChildren(),this._pixiLayer.stage.addChild(t.container)}this._canUpdate=!1,this._currentScene=t,this._currentScene.scene.preload().then((function(){e._canUpdate=!0,t.scene.create()}))},e._exists=function(t){return null!=this._getScene(t)},e._getScene=function(t){for(var e=0;e<this._sceneList.length;e++)if(this._sceneList[e].name==t)return this._sceneList[e];return null},e._createSceneData=function(t,e){return this._sceneData.createNew(t,e)},e._createContainer=function(){return this._pixiLayer.createContainer()},t}();function Ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var $e=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pixiLayer=e}var e,n,i,r=t.prototype;return r.startRenderer=function(t,e,n,i){this._pixiLayer.createApplication(t,e,n,i)},r.createContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return t?this._pixiLayer.createParticleContainer(e,n,i,r):this._pixiLayer.createContainer()},r.createSprite=function(t,e){return this._pixiLayer.createSprite(t,e)},r.drawRect=function(t,e,n,i,r,s){this._pixiLayer.drawRect(t,e,n,i,r)},r.createCustomSprite=function(t){var e=this._pixiLayer.createCustomSprite();return e.init(t),e},r.createSpine=function(t){var e=this._pixiLayer.createSpine(t);return e.anchor={x:.5,y:.5,set:function(t){}},e},r.createGraphics=function(){return this._pixiLayer.createGraphics()},r.createText=function(t,e){return this._pixiLayer.createText(t,e)},r.updateTexture=function(t,e,n){this._pixiLayer.updateTexture(t,e,n)},e=t,(n=[{key:"fps",get:function(){return this._pixiLayer.fps}},{key:"mouse",get:function(){return this._pixiLayer.mouse}}])&&Ze(e.prototype,n),i&&Ze(e,i),t}(),tn=$e,en=n(6194);var nn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.createTween=function(t,e,n,i){var r=new en.ZP.Tween(t);return r.to(e,n),r.easing(en.ZP.Easing.Linear.None),r.onComplete((function(){i()})),r},t}();function rn(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}function sn(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(t){rn(s,i,r,a,o,"next",t)}function o(t){rn(s,i,r,a,o,"throw",t)}a(void 0)}))}}var an=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"localhost"==window.location.hostname||window.location.hostname.includes("local.fightgame")?this._baseUrl="localhost:5000":this._baseUrl="fightgame.asia",console.log("Base URL: ",this._baseUrl),this._ws=null}var e=t.prototype;return e.startServer=function(t){var e=this;return sn(O().mark((function n(){var i;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i="http://"+e._baseUrl+"/join_game",e._baseUrl.includes("localhost")||(i="https://"+e._baseUrl+"/join_game"),n.abrupt("return",new Promise(function(){var n=sn(O().mark((function n(r,s){var a,o;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e._httpGetAsync(i);case 2:a=n.sent,a="ws://"+e._baseUrl+a,e._baseUrl.includes("localhost")||(a=a.replace("ws://","wss://")),e._ws=new WebSocket(a),o={type:"addConnection",data:null},e._ws.addEventListener("open",(function(t){e._ws.send(JSON.stringify(o)),console.log('Handshake done, connecting to "'.concat(a,'"'))})),r(1),e._ws.addEventListener("message",(function(e){setTimeout((function(){var n=JSON.parse(e.data);t(n)}),5)}));case 10:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()));case 3:case"end":return n.stop()}}),n)})))()},e.send=function(t){if(this._ws){var e=this;setTimeout((function(){var n;null===(n=e._ws)||void 0===n||n.send(JSON.stringify(t))}),5)}else console.error("Server can't send data before starting!")},e._httpGetAsync=function(t){return sn(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e(i.responseText)},i.open("GET",t,!0),i.send(null)})));case 1:case"end":return e.stop()}}),e)})))()},t}(),on=an,cn=n(4431);function hn(t,e,n,i,r,s,a){try{var o=t[s](a),c=o.value}catch(h){return void n(h)}o.done?e(c):Promise.resolve(c).then(i,r)}function un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var dn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._account=null}var e,n,i,r=t.prototype;return r.getWalletIcon=function(t){return"MetaMask"==t.name?"metamask":"Phantom"==t.name?"phantom":null},r.findWallets=function(){return(0,cn.MX)()},r.connectWallet=function(t){var e,n=this;return(e=O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.connect();case 2:return n._account=t,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(t){hn(s,i,r,a,o,"next",t)}function o(t){hn(s,i,r,a,o,"throw",t)}a(void 0)}))})()},e=t,(n=[{key:"account",get:function(){return this._account}}])&&un(e.prototype,n),i&&un(e,i),t}(),_n=dn,ln=n(9842);var fn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._engine=ln.Engine.create(),this._objects=[],this._lastUpdate=Date.now()}var e=t.prototype;return e.addObject=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.body=this._createBody(t,e),ln.World.add(this._engine.world,t.body),this._objects.push(t)},e.removeObject=function(t){var e=this._objects.indexOf(t);e>-1&&(null!=this._objects[e].body?ln.World.remove(this._engine.world,this._objects[e].body):console.error("Can't remove body which doesn't exist!"),this._objects.splice(e,1))},e.setPosition=function(t,e){null!=t.body?ln.Body.setPosition(t.body,e):console.error("Can't access body which doesn't exist!")},e.setVelocity=function(t,e){null!=t.body?(0==e.x&&0!=e.y&&(e.x=t.body.velocity.x),0==e.y&&(e.y=t.body.velocity.y),ln.Body.setVelocity(t.body,e)):console.error("Can't access body which doesn't exist!")},e.setStatic=function(t,e){null!=t.body?ln.Body.setStatic(t.body,e):console.error("Can't access body which doesn't exist!")},e.applyForce=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.position.x,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.position.y;null!=t.body?ln.Body.applyForce(t.body,{x:n,y:i},e):console.error("Can't access body which doesn't exist!")},e.collides=function(t,e){var n=!1;return e.forEach((function(e){t.body&&e.body&&ln.SAT.collides(t.body,e.body)&&(console.log(t,"collides with",e),n=!0)})),n},e.setCategory=function(t,e){t.body&&(t.body.collisionFilter.category=e)},e.setMask=function(t,e){t.body&&(t.body.collisionFilter.mask=e)},e.update=function(t){var e=this,n=Date.now(),i=n-this._lastUpdate;if(this._objects.forEach((function(t){0==t.body.contVector.x&&0==t.body.contVector.y||e.setVelocity(t,{x:t.body.contVector.x,y:t.body.contVector.y})})),i>=4){this._lastUpdate=n;var r=this._getObjPos();ln.Engine.update(this._engine,1e3/60);var s=this._getObjPos();this._compareValues(r,s),this._objects.forEach((function(t){if(null!=t.body){t.display.width,t.display.height;var e=t.body.position.x,n=t.body.position.y;t.position.x=e,t.position.y=n}}))}},e.setContVector=function(t,e){t.body.contVector={x:e.x,y:e.y}},e.createNew=function(){return new t},e._randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e._compareValues=function(t,e){var n=this;t.forEach((function(t,i){var r=e[i];n._setPositive(t.x-r.x)>=1||n._setPositive(t.y-r.y)}))},e._getObjPos=function(){var t=[];return this._objects.forEach((function(e){null!=e.body&&t.push({x:e.body.position.x,y:e.body.position.y})})),t},e._createBody=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=t.display.width,r=.5*t.display.height,s=t.position.x-i*t.position.anchorX,a=t.position.y-r*t.position.anchorY;return(e=null!=n?ln.Bodies.rectangle(s,a,i,r,n):ln.Bodies.rectangle(s,a,i,r)).contVector={x:0,y:0},e},e._setPositive=function(t){return t<0?-1*t:t},t}(),pn=fn;function yn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var mn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._records=[],this._deleteAfter=1e3}var e,n,i,r=t.prototype;return r.addData=function(t){this._records.push({data:t,time:Date.now()}),this._removeDeadWeight()},r.createNew=function(){return new t},r.indexOf=function(t){var e=-1;return this._records.forEach((function(n,i){n.data==t&&(e=i)})),e},r.contains=function(t){return this.indexOf(t)>-1},r._removeDeadWeight=function(){if(this._records.length>2){var t=this._records[0];this._records[this._records.length-1].time-t.time>this._deleteAfter&&this._records.shift()}},e=t,(n=[{key:"deleteAfter",get:function(){return this._deleteAfter},set:function(t){this._deleteAfter=t}},{key:"direction",get:function(){if(this._records.length<2)return Z.Same;var t=this._records[this._records.length-1],e=this._records[this._records.length-1];return t.time-e.time>250?Z.Same:function(t,e){return t-e>0?Z.Positive:t==e?Z.Same:Z.Negative}(t.data,e.data)}}])&&yn(e.prototype,n),i&&yn(e,i),t}();function gn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return t.prototype.createNew=function(){return new t},e=t,(n=[{key:"speed",get:function(){return 2}}])&&gn(e.prototype,n),i&&gn(e,i),t}();function bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var wn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._f=function(){},this._function=function(){}}var e,n,i,r=t.prototype;return r.init=function(t,e){this._f=t,this._context=e,this._function=t.bind(e)},r.execute=function(t){return this._function(t)},r.createNew=function(){return new t},e=t,(n=[{key:"function",get:function(){return this._f}},{key:"context",get:function(){return this._context}}])&&bn(e.prototype,n),i&&bn(e,i),t}();function Dn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var xn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return t.prototype.createNew=function(){return new t},e=t,(n=[{key:"WORLD_UPDATE",get:function(){return"world_update"}},{key:"REMOVE_PLAYER",get:function(){return"remove_player"}},{key:"CHAT_MESSAGE",get:function(){return"chat_message"}},{key:"CHAT_HISTORY",get:function(){return"chat_history"}},{key:"ADD_CONNECTION",get:function(){return"addConnection"}},{key:"MOVE_PLAYER",get:function(){return"movePlayer"}},{key:"TEST_PING",get:function(){return"test_ping"}}])&&Dn(e.prototype,n),i&&Dn(e,i),t}();function Sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var kn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Sn(this,t),this._smartDepend=new b(e),this._addModules(),this._addDepends()}var e=t.prototype;return e.getMain=function(){return this._smartDepend.resolve(this._NoireLibre)},e._addModules=function(){this._Camera=this._smartDepend.addModule(D,!0),this._ChatBot=this._smartDepend.addModule(S,!1),this._GameAPI=this._smartDepend.addModule(E,!1),this._PingTest=this._smartDepend.addModule(j,!1),this._SlowEvent=this._smartDepend.addModule(M,!1),this._Background=this._smartDepend.addModule(U,!1),this._Button=this._smartDepend.addModule(B,!1),this._Login=this._smartDepend.addModule(J,!1),this._MapBuilder=this._smartDepend.addModule($,!1),this._Player=this._smartDepend.addModule(st,!1),this._Arena=this._smartDepend.addModule(ct,!1),this._Char=this._smartDepend.addModule(dt,!1),this._Loading=this._smartDepend.addModule(pt,!1),this._Start=this._smartDepend.addModule(gt,!1),this._Config=this._smartDepend.addModule(bt,!1),this._ExecTime=this._smartDepend.addModule(Dt,!1),this._Loop=this._smartDepend.addModule(xt,!0),this._ParticleSystem=this._smartDepend.addModule(St,!1),this._ScaleManager=this._smartDepend.addModule(kt,!0),this._Resource=this._smartDepend.addModule(Pt,!1),this._ScaleMode=this._smartDepend.addModule(F,!1),this._SceneData=this._smartDepend.addModule(Ct,!1),this._Character=this._smartDepend.addModule(Wt,!1),this._Body=this._smartDepend.addModule(Ut,!1),this._Display=this._smartDepend.addModule(It,!1),this._Input=this._smartDepend.addModule(Ht,!1),this._Label=this._smartDepend.addModule(Kt,!1),this._Position=this._smartDepend.addModule(Vt,!1),this._Scale=this._smartDepend.addModule(Jt,!1),this._CoreEntity=this._smartDepend.addModule(jt,!1),this._EntityFactory=this._smartDepend.addModule(Qt,!1),this._Spine=this._smartDepend.addModule(ie,!1),this._Sprite=this._smartDepend.addModule(he,!1),this._Text=this._smartDepend.addModule(ye,!1),this._NoireLibre=this._smartDepend.addModule(me,!1),this._AbstractGameObject=this._smartDepend.addModule(ve,!1),this._DataLoader=this._smartDepend.addModule(xe,!0),this._GfxLoader=this._smartDepend.addModule(Oe,!1),this._PixiCustomSprite=this._smartDepend.addModule(Ne,!1),this._PixiLayer=this._smartDepend.addModule(Ue,!0),this._PxPoint=this._smartDepend.addModule(Be,!1),this._PxText=this._smartDepend.addModule(Ke,!1),this._BridgeConfig=this._smartDepend.addModule(Ve,!1),this._ReactBridge=this._smartDepend.addModule(Je,!0),this._SceneManager=this._smartDepend.addModule(Qe,!0),this._Screen=this._smartDepend.addModule(tn,!1),this._TweenJs=this._smartDepend.addModule(nn,!1),this._WsServer=this._smartDepend.addModule(on,!0),this._Web3Wallet=this._smartDepend.addModule(_n,!1),this._NewPhysics=this._smartDepend.addModule(pn,!1),this._TimedStorage=this._smartDepend.addModule(mn,!1),this._AnimationDir=this._smartDepend.addModule(nt,!1),this._CommonConfig=this._smartDepend.addModule(vn,!1),this._FunObj=this._smartDepend.addModule(wn,!1),this._SocketTypes=this._smartDepend.addModule(xn,!1)},e._addDepends=function(){this._smartDepend.addDependency(this._PingTest,this._WsServer),this._smartDepend.addDependency(this._PingTest,this._SocketTypes),this._smartDepend.addDependency(this._Background,this._EntityFactory),this._smartDepend.addDependency(this._Background,this._Sprite),this._smartDepend.addDependency(this._Button,this._EntityFactory),this._smartDepend.addDependency(this._Button,this._Sprite),this._smartDepend.addDependency(this._Login,this._EntityFactory),this._smartDepend.addDependency(this._Login,this._Sprite),this._smartDepend.addDependency(this._MapBuilder,this._EntityFactory),this._smartDepend.addDependency(this._Player,this._EntityFactory),this._smartDepend.addDependency(this._Player,this._Character),this._smartDepend.addDependency(this._Player,this._Screen),this._smartDepend.addDependency(this._Player,this._Config),this._smartDepend.addDependency(this._Player,this._AnimationDir),this._smartDepend.addDependency(this._Player,this._TimedStorage),this._smartDepend.addDependency(this._Player,this._TimedStorage),this._smartDepend.addDependency(this._Player,this._BridgeConfig),this._smartDepend.addDependency(this._Player,this._ReactBridge),this._smartDepend.addDependency(this._Arena,this._GfxLoader),this._smartDepend.addDependency(this._Arena,this._DataLoader),this._smartDepend.addDependency(this._Arena,this._Resource),this._smartDepend.addDependency(this._Arena,this._EntityFactory),this._smartDepend.addDependency(this._Arena,this._SceneManager),this._smartDepend.addDependency(this._Arena,this._Sprite),this._smartDepend.addDependency(this._Arena,this._Text),this._smartDepend.addDependency(this._Arena,this._Camera),this._smartDepend.addDependency(this._Arena,this._Player),this._smartDepend.addDependency(this._Arena,this._Config),this._smartDepend.addDependency(this._Arena,this._SlowEvent),this._smartDepend.addDependency(this._Arena,this._MapBuilder),this._smartDepend.addDependency(this._Arena,this._WsServer),this._smartDepend.addDependency(this._Arena,this._ChatBot),this._smartDepend.addDependency(this._Arena,this._Background),this._smartDepend.addDependency(this._Arena,this._NewPhysics),this._smartDepend.addDependency(this._Arena,this._PingTest),this._smartDepend.addDependency(this._Arena,this._SocketTypes),this._smartDepend.addDependency(this._Arena,this._Character),this._smartDepend.addDependency(this._Arena,this._GameAPI),this._smartDepend.addDependency(this._Arena,this._BridgeConfig),this._smartDepend.addDependency(this._Arena,this._ReactBridge),this._smartDepend.addDependency(this._Char,this._GfxLoader),this._smartDepend.addDependency(this._Char,this._DataLoader),this._smartDepend.addDependency(this._Char,this._Resource),this._smartDepend.addDependency(this._Char,this._EntityFactory),this._smartDepend.addDependency(this._Char,this._SceneManager),this._smartDepend.addDependency(this._Char,this._BridgeConfig),this._smartDepend.addDependency(this._Char,this._ReactBridge),this._smartDepend.addDependency(this._Loading,this._GfxLoader),this._smartDepend.addDependency(this._Loading,this._DataLoader),this._smartDepend.addDependency(this._Loading,this._Resource),this._smartDepend.addDependency(this._Loading,this._EntityFactory),this._smartDepend.addDependency(this._Loading,this._SceneManager),this._smartDepend.addDependency(this._Start,this._GfxLoader),this._smartDepend.addDependency(this._Start,this._DataLoader),this._smartDepend.addDependency(this._Start,this._Resource),this._smartDepend.addDependency(this._Start,this._EntityFactory),this._smartDepend.addDependency(this._Start,this._SceneManager),this._smartDepend.addDependency(this._Start,this._Background),this._smartDepend.addDependency(this._Start,this._Login),this._smartDepend.addDependency(this._Start,this._GameAPI),this._smartDepend.addDependency(this._Start,this._Web3Wallet),this._smartDepend.addDependency(this._Start,this._Button),this._smartDepend.addDependency(this._Loop,this._FunObj),this._smartDepend.addDependency(this._ParticleSystem,this._EntityFactory),this._smartDepend.addDependency(this._Character,this._Position),this._smartDepend.addDependency(this._Character,this._Display),this._smartDepend.addDependency(this._Character,this._Input),this._smartDepend.addDependency(this._Character,this._ScaleManager),this._smartDepend.addDependency(this._Character,this._AbstractGameObject),this._smartDepend.addDependency(this._Character,this._Screen),this._smartDepend.addDependency(this._Character,this._SceneManager),this._smartDepend.addDependency(this._Body,this._AbstractGameObject),this._smartDepend.addDependency(this._Display,this._AbstractGameObject),this._smartDepend.addDependency(this._Display,this._Scale),this._smartDepend.addDependency(this._Display,this._Screen),this._smartDepend.addDependency(this._Input,this._AbstractGameObject),this._smartDepend.addDependency(this._Label,this._AbstractGameObject),this._smartDepend.addDependency(this._Position,this._AbstractGameObject),this._smartDepend.addDependency(this._Position,this._Scale),this._smartDepend.addDependency(this._Position,this._Camera),this._smartDepend.addDependency(this._Position,this._Screen),this._smartDepend.addDependency(this._Scale,this._Config),this._smartDepend.addDependency(this._Scale,this._ScaleMode),this._smartDepend.addDependency(this._Scale,this._AbstractGameObject),this._smartDepend.addDependency(this._CoreEntity,this._Screen),this._smartDepend.addDependency(this._CoreEntity,this._Position),this._smartDepend.addDependency(this._CoreEntity,this._Display),this._smartDepend.addDependency(this._CoreEntity,this._Input),this._smartDepend.addDependency(this._CoreEntity,this._AbstractGameObject),this._smartDepend.addDependency(this._CoreEntity,this._ScaleManager),this._smartDepend.addDependency(this._EntityFactory,this._Sprite),this._smartDepend.addDependency(this._EntityFactory,this._Spine),this._smartDepend.addDependency(this._EntityFactory,this._Text),this._smartDepend.addDependency(this._EntityFactory,this._TweenJs),this._smartDepend.addDependency(this._EntityFactory,this._Character),this._smartDepend.addDependency(this._Spine,this._Position),this._smartDepend.addDependency(this._Spine,this._Display),this._smartDepend.addDependency(this._Spine,this._Input),this._smartDepend.addDependency(this._Spine,this._ScaleManager),this._smartDepend.addDependency(this._Spine,this._AbstractGameObject),this._smartDepend.addDependency(this._Spine,this._Screen),this._smartDepend.addDependency(this._Spine,this._SceneManager),this._smartDepend.addDependency(this._Sprite,this._Position),this._smartDepend.addDependency(this._Sprite,this._Display),this._smartDepend.addDependency(this._Sprite,this._Input),this._smartDepend.addDependency(this._Sprite,this._ScaleManager),this._smartDepend.addDependency(this._Sprite,this._AbstractGameObject),this._smartDepend.addDependency(this._Sprite,this._Screen),this._smartDepend.addDependency(this._Sprite,this._SceneManager),this._smartDepend.addDependency(this._Text,this._Position),this._smartDepend.addDependency(this._Text,this._Display),this._smartDepend.addDependency(this._Text,this._Input),this._smartDepend.addDependency(this._Text,this._Label),this._smartDepend.addDependency(this._Text,this._AbstractGameObject),this._smartDepend.addDependency(this._Text,this._Screen),this._smartDepend.addDependency(this._Text,this._SceneManager),this._smartDepend.addDependency(this._Text,this._ScaleManager),this._smartDepend.addDependency(this._NoireLibre,this._Config),this._smartDepend.addDependency(this._NoireLibre,this._Loop),this._smartDepend.addDependency(this._NoireLibre,this._Screen),this._smartDepend.addDependency(this._NoireLibre,this._SceneManager),this._smartDepend.addDependency(this._NoireLibre,this._Loading),this._smartDepend.addDependency(this._NoireLibre,this._Arena),this._smartDepend.addDependency(this._NoireLibre,this._Char),this._smartDepend.addDependency(this._NoireLibre,this._Start),this._smartDepend.addDependency(this._GfxLoader,this._PixiLayer),this._smartDepend.addDependency(this._PixiLayer,this._PxText),this._smartDepend.addDependency(this._PxText,this._PxPoint),this._smartDepend.addDependency(this._SceneManager,this._PixiLayer),this._smartDepend.addDependency(this._SceneManager,this._SceneData),this._smartDepend.addDependency(this._SceneManager,this._Loop),this._smartDepend.addDependency(this._SceneManager,this._ScaleManager),this._smartDepend.addDependency(this._Screen,this._PixiLayer)},t}(),On=kn,Pn=function(t){var e=t.GlobalState,n=(0,r.useRef)(null);return(0,r.useEffect)((function(){!function(t,e){window.pixiDivTarget||(console.log("Hello World!"),console.log("containerRef: ",t.current),window.pixiDivTarget=t.current,console.log("GlobalState",e),new On(e).getMain().startGame(),console.log("Welcome to NoireLibre!"))}(n,e)}),[n]),(0,i.jsx)("div",{ref:n})}},6601:function(){}}]);